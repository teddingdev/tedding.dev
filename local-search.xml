<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>一些有趣的项目集合</title>
    <link href="/2023/08/01/189af5fea30.html"/>
    <url>/2023/08/01/189af5fea30.html</url>
    
    <content type="html"><![CDATA[<p>记录一下收集的项目</p><span id="more"></span><h2 id="satori"><a href="#satori" class="headerlink" title="satori"></a>satori</h2><p><a href="https://github.com/vercel/satori">https://github.com/vercel/satori</a></p><h2 id="bark"><a href="#bark" class="headerlink" title="bark"></a>bark</h2><p><a href="https://github.com/Finb/bark-server">https://github.com/Finb/bark-server</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>fcitx5 使用自定义 lua 扩展输入当前日期和时间</title>
    <link href="/2023/07/21/189774b2a10.html"/>
    <url>/2023/07/21/189774b2a10.html</url>
    
    <content type="html"><![CDATA[fcitx5 使用自定义 lua 扩展输入当前日期和时间<p><code>fcitx5</code> 输入法在输入特殊”字符“时，可以通过 <code>extension</code> 转换成预定义的内容。</p><span id="more"></span><p><code>fcitx5</code> 内置了一个 <code>pinyin.lua</code> 脚本。这个脚本我没有仔细读，大致是实现了：</p><ul><li>输入 “日期”，候选列表 提供 [2023-07-21]，[2023年7月21日]，[二〇二三年七月二十一日]</li><li>输入 “时间”，候选列表 提供 [15:52]，[15时52分]，[十五时五十三分]</li></ul><p>现在我使用起来，希望能够提供“时分秒”的时间精度，所以从我们将 <code>/usr/share/fcitx5/lua/imeapi/extensions/pinyin.lua</code> 复制到 <code>/home/suse/.local/share/fcitx5/lua/imeapi/extensions/pinyin.lua</code>，然后修改用户目录下的脚本。下面是脚本变更的部分：</p><h3 id="脚本变更"><a href="#脚本变更" class="headerlink" title="脚本变更"></a>脚本变更</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[~/.local/share/fcitx5/lua/imeapi/extensions]<br>└─$ git --no-pager diff<br>diff --git a/pinyin.lua b/pinyin.lua<br>index f68484c..8af59b8 100644<br>--- a/pinyin.lua<br>+++ b/pinyin.lua<br>@@ -21,7 +21,7 @@ <span class="hljs-built_in">local</span> _CHINESE_DIGITS = &#123;<br>   [10] = <span class="hljs-string">&quot;十&quot;</span>,<br> &#125;<br> <span class="hljs-built_in">local</span> _DATE_PATTERN = <span class="hljs-string">&quot;^(%d+)-(%d+)-(%d+)$&quot;</span><br>-<span class="hljs-built_in">local</span> _TIME_PATTERN = <span class="hljs-string">&quot;^(%d+):(%d+)$&quot;</span><br>+<span class="hljs-built_in">local</span> _TIME_PATTERN = <span class="hljs-string">&quot;^(%d+):(%d+):(%d+)$&quot;</span><br> <span class="hljs-built_in">local</span> _MONTH_TABLE_LEAF = &#123; 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 &#125;<br> <br> <span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> get_chinese_math_num(num)<br>@@ -93,15 +93,18 @@ <span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> get_chinese_date(y, m, d, full)<br>     end<br> end<br> <br>-<span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> get_chinese_time(h, m, full)<br>+<span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> get_chinese_time(h, m, s, full)<br>     <span class="hljs-keyword">if</span> full <span class="hljs-keyword">then</span><br>         <span class="hljs-built_in">local</span> ret = get_chinese_math_num(h) .. <span class="hljs-string">&quot;时&quot;</span><br>-        <span class="hljs-keyword">if</span> m &gt; 0 <span class="hljs-keyword">then</span><br>+        <span class="hljs-keyword">if</span> m &gt;= 0 <span class="hljs-keyword">then</span><br>             ret = ret .. get_chinese_math_num(m) .. <span class="hljs-string">&quot;分&quot;</span><br>+            <span class="hljs-keyword">if</span> s &gt;= 0 <span class="hljs-keyword">then</span><br>+                ret = ret .. get_chinese_math_num(s) .. <span class="hljs-string">&quot;秒&quot;</span><br>+            end<br>         end<br>         <span class="hljs-built_in">return</span> ret<br>     <span class="hljs-keyword">else</span><br>-        <span class="hljs-built_in">return</span> h .. <span class="hljs-string">&quot;时&quot;</span> .. m .. <span class="hljs-string">&quot;分&quot;</span><br>+        <span class="hljs-built_in">return</span> h .. <span class="hljs-string">&quot;时&quot;</span> .. m .. <span class="hljs-string">&quot;分&quot;</span> .. s .. <span class="hljs-string">&quot;秒&quot;</span><br>     end<br> end<br> <br>@@ -109,8 +112,8 @@ <span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> normalize_date(y, m, d)<br>     <span class="hljs-built_in">return</span> string.format(<span class="hljs-string">&quot;%d-%02d-%02d&quot;</span>, y, m, d)<br> end<br> <br>-<span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> normalize_time(h, m)<br>-    <span class="hljs-built_in">return</span> string.format(<span class="hljs-string">&quot;%02d:%02d&quot;</span>, h, m)<br>+<span class="hljs-built_in">local</span> <span class="hljs-keyword">function</span> normalize_time(h, m, s)<br>+    <span class="hljs-built_in">return</span> string.format(<span class="hljs-string">&quot;%02d:%02d:%02d&quot;</span>, h, m, s)<br> end<br> <br> <span class="hljs-keyword">function</span> pinyin_get_time(input)<br>@@ -120,18 +123,20 @@ <span class="hljs-keyword">function</span> pinyin_get_time(input)<br> <br>     <span class="hljs-built_in">local</span> now = input<br>     <span class="hljs-keyword">if</span> <span class="hljs-comment">#input == 0 then</span><br>-        now = os.date(<span class="hljs-string">&quot;%H:%M&quot;</span>)<br>+        -- now = os.date(<span class="hljs-string">&quot;%H:%M&quot;</span>)<br>+        now = os.date(<span class="hljs-string">&quot;%H:%M:%S&quot;</span>)<br>     end<br>     <span class="hljs-built_in">local</span> hour, minute<br>-    now:gsub(_TIME_PATTERN, <span class="hljs-keyword">function</span>(h, m)<br>+    now:gsub(_TIME_PATTERN, <span class="hljs-keyword">function</span>(h, m, s)<br>         hour = tonumber(h)<br>         minute = tonumber(m)<br>+        seconds = tonumber(s)<br>     end)<br>     _verify_time(hour, minute)<br>     <span class="hljs-built_in">return</span> &#123;<br>-        normalize_time(hour, minute),<br>-        get_chinese_time(hour, minute, <span class="hljs-literal">false</span>),<br>-        get_chinese_time(hour, minute, <span class="hljs-literal">true</span>),<br>+        normalize_time(hour, minute, seconds),<br>+        get_chinese_time(hour, minute, seconds, <span class="hljs-literal">false</span>),<br>+        get_chinese_time(hour, minute, seconds, <span class="hljs-literal">true</span>),<br>     &#125;<br> end<br></code></pre></td></tr></table></figure><h3 id="完整脚本"><a href="#完整脚本" class="headerlink" title="完整脚本"></a>完整脚本</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">--</span><br><span class="hljs-comment">-- SPDX-FileCopyrightText: 2010 Peng Wu &lt;alexepico@gmail.com&gt;</span><br><span class="hljs-comment">-- SPDX-FileCopyrightText: 2020 Weng Xuetian &lt;wengxt@gmail.com&gt;</span><br><span class="hljs-comment">--</span><br><span class="hljs-comment">-- SPDX-License-Identifier: GPL-2.0-or-later</span><br><span class="hljs-comment">--</span><br><span class="hljs-comment">---- encoding: UTF-8</span><br><span class="hljs-keyword">local</span> fcitx = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fcitx&quot;</span>)<br><br><span class="hljs-keyword">local</span> _CHINESE_DIGITS = &#123;<br>  [<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;〇&quot;</span>,<br>  [<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;一&quot;</span>,<br>  [<span class="hljs-number">2</span>] = <span class="hljs-string">&quot;二&quot;</span>,<br>  [<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;三&quot;</span>,<br>  [<span class="hljs-number">4</span>] = <span class="hljs-string">&quot;四&quot;</span>,<br>  [<span class="hljs-number">5</span>] = <span class="hljs-string">&quot;五&quot;</span>,<br>  [<span class="hljs-number">6</span>] = <span class="hljs-string">&quot;六&quot;</span>,<br>  [<span class="hljs-number">7</span>] = <span class="hljs-string">&quot;七&quot;</span>,<br>  [<span class="hljs-number">8</span>] = <span class="hljs-string">&quot;八&quot;</span>,<br>  [<span class="hljs-number">9</span>] = <span class="hljs-string">&quot;九&quot;</span>,<br>  [<span class="hljs-number">10</span>] = <span class="hljs-string">&quot;十&quot;</span>,<br>&#125;<br><span class="hljs-keyword">local</span> _DATE_PATTERN = <span class="hljs-string">&quot;^(%d+)-(%d+)-(%d+)$&quot;</span><br><span class="hljs-keyword">local</span> _TIME_PATTERN = <span class="hljs-string">&quot;^(%d+):(%d+):(%d+)$&quot;</span><br><span class="hljs-keyword">local</span> _MONTH_TABLE_LEAF = &#123; <span class="hljs-number">31</span>, <span class="hljs-number">29</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span> &#125;<br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_chinese_math_num</span><span class="hljs-params">(num)</span></span><br>  <span class="hljs-keyword">local</span> ret<br>    <span class="hljs-keyword">if</span> num &lt; <span class="hljs-number">10</span> <span class="hljs-keyword">then</span><br>        ret = _CHINESE_DIGITS[num]<br>    <span class="hljs-keyword">elseif</span> num &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">then</span><br>        ret = _CHINESE_DIGITS[<span class="hljs-number">10</span>]<br>        <span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">10</span> <span class="hljs-keyword">then</span><br>            ret = ret .. _CHINESE_DIGITS[num % <span class="hljs-number">10</span>]<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">elseif</span> num &lt; <span class="hljs-number">100</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">local</span> <span class="hljs-built_in">mod</span> = num % <span class="hljs-number">10</span><br>        ret = _CHINESE_DIGITS[(num - <span class="hljs-built_in">mod</span>) / <span class="hljs-number">10</span>] .. _CHINESE_DIGITS[<span class="hljs-number">10</span>]<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">mod</span> &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>            ret = ret .. _CHINESE_DIGITS[<span class="hljs-built_in">mod</span>]<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Invalid number&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> ret<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_chinese_non_math_num</span><span class="hljs-params">(num)</span></span><br>    <span class="hljs-keyword">local</span> ret = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> ch <span class="hljs-keyword">in</span> <span class="hljs-built_in">tostring</span>(num):<span class="hljs-built_in">gmatch</span>(<span class="hljs-string">&quot;.&quot;</span>) <span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">if</span> ch &gt;= <span class="hljs-string">&quot;0&quot;</span> <span class="hljs-keyword">and</span> ch &lt;= <span class="hljs-string">&quot;9&quot;</span> <span class="hljs-keyword">then</span><br>            ch = _CHINESE_DIGITS[<span class="hljs-built_in">tonumber</span>(ch)]<br>        <span class="hljs-keyword">end</span><br>        ret = ret .. ch<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> ret<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_verify_time</span><span class="hljs-params">(hour, minute)</span></span><br>    <span class="hljs-keyword">if</span> hour &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> hour &gt; <span class="hljs-number">23</span> <span class="hljs-keyword">or</span> minute &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> minute &gt; <span class="hljs-number">59</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Invalid time&quot;</span>)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_verify_date</span><span class="hljs-params">(month, day)</span></span><br>    <span class="hljs-keyword">if</span> month &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> month &gt; <span class="hljs-number">12</span> <span class="hljs-keyword">or</span> day &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> day &gt; _MONTH_TABLE_LEAF[month] <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Invalid date&quot;</span>)<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_verify_date_with_year</span><span class="hljs-params">(year, month, day)</span></span><br>    _verify_date(month, day)<br>    <span class="hljs-keyword">if</span> year &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> year &gt; <span class="hljs-number">9999</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Invalid year&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">if</span> month == <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> day == <span class="hljs-number">29</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">if</span> year % <span class="hljs-number">400</span> ~= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> year % <span class="hljs-number">100</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>            <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Invalid lunar day&quot;</span>)<br>        <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">if</span> year % <span class="hljs-number">4</span> ~= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>            <span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Invalid lunar day&quot;</span>)<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_chinese_date</span><span class="hljs-params">(y, m, d, full)</span></span><br>    <span class="hljs-keyword">if</span> full <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> get_chinese_non_math_num(y) .. <span class="hljs-string">&quot;年&quot;</span> ..<br>               get_chinese_math_num(m) .. <span class="hljs-string">&quot;月&quot;</span> ..<br>               get_chinese_math_num(d) .. <span class="hljs-string">&quot;日&quot;</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> y .. <span class="hljs-string">&quot;年&quot;</span> .. m .. <span class="hljs-string">&quot;月&quot;</span> .. d .. <span class="hljs-string">&quot;日&quot;</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_chinese_time</span><span class="hljs-params">(h, m, s, full)</span></span><br>    <span class="hljs-keyword">if</span> full <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">local</span> ret = get_chinese_math_num(h) .. <span class="hljs-string">&quot;时&quot;</span><br>        <span class="hljs-keyword">if</span> m &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>            ret = ret .. get_chinese_math_num(m) .. <span class="hljs-string">&quot;分&quot;</span><br>            <span class="hljs-keyword">if</span> s &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>                ret = ret .. get_chinese_math_num(s) .. <span class="hljs-string">&quot;秒&quot;</span><br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">return</span> ret<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> h .. <span class="hljs-string">&quot;时&quot;</span> .. m .. <span class="hljs-string">&quot;分&quot;</span> .. s .. <span class="hljs-string">&quot;秒&quot;</span><br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalize_date</span><span class="hljs-params">(y, m, d)</span></span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;%d-%02d-%02d&quot;</span>, y, m, d)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalize_time</span><span class="hljs-params">(h, m, s)</span></span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;%02d:%02d:%02d&quot;</span>, h, m, s)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pinyin_get_time</span><span class="hljs-params">(input)</span></span><br>    <span class="hljs-keyword">if</span> fcitx.currentInputMethod() ~= <span class="hljs-string">&quot;pinyin&quot;</span> <span class="hljs-keyword">and</span> fcitx.currentInputMethod() ~= <span class="hljs-string">&quot;shuangpin&quot;</span>  <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-keyword">local</span> now = <span class="hljs-built_in">input</span><br>    <span class="hljs-keyword">if</span> #<span class="hljs-built_in">input</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-comment">-- now = os.date(&quot;%H:%M&quot;)</span><br>        now = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%H:%M:%S&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">local</span> hour, minute<br>    now:<span class="hljs-built_in">gsub</span>(_TIME_PATTERN, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(h, m, s)</span></span><br>        hour = <span class="hljs-built_in">tonumber</span>(h)<br>        minute = <span class="hljs-built_in">tonumber</span>(m)<br>        seconds = <span class="hljs-built_in">tonumber</span>(s)<br>    <span class="hljs-keyword">end</span>)<br>    _verify_time(hour, minute)<br>    <span class="hljs-keyword">return</span> &#123;<br>        normalize_time(hour, minute, seconds),<br>        get_chinese_time(hour, minute, seconds, <span class="hljs-literal">false</span>),<br>        get_chinese_time(hour, minute, seconds, <span class="hljs-literal">true</span>),<br>    &#125;<br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pinyin_get_date</span><span class="hljs-params">(input)</span></span><br>    <span class="hljs-keyword">if</span> fcitx.currentInputMethod() ~= <span class="hljs-string">&quot;pinyin&quot;</span> <span class="hljs-keyword">and</span> fcitx.currentInputMethod() ~= <span class="hljs-string">&quot;shuangpin&quot;</span>  <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-keyword">local</span> now = <span class="hljs-built_in">input</span><br>    <span class="hljs-keyword">if</span> #<span class="hljs-built_in">input</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>        now = <span class="hljs-built_in">os</span>.<span class="hljs-built_in">date</span>(<span class="hljs-string">&quot;%Y-%m-%d&quot;</span>)<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">local</span> year, month, day<br>    now:<span class="hljs-built_in">gsub</span>(_DATE_PATTERN, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(y, m, d)</span></span><br>        year = <span class="hljs-built_in">tonumber</span>(y)<br>        month = <span class="hljs-built_in">tonumber</span>(m)<br>        day = <span class="hljs-built_in">tonumber</span>(d)<br>    <span class="hljs-keyword">end</span>)<br>    _verify_date_with_year(year, month, day)<br>    <span class="hljs-keyword">return</span> &#123;<br>        normalize_date(year, month, day),<br>        get_chinese_date(year, month, day, <span class="hljs-literal">false</span>),<br>        get_chinese_date(year, month, day, <span class="hljs-literal">true</span>),<br>    &#125;<br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pinyin_get_current_time</span><span class="hljs-params">()</span></span><br>    <span class="hljs-keyword">return</span> pinyin_get_time(<span class="hljs-string">&quot;&quot;</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pinyin_get_today</span><span class="hljs-params">()</span></span><br>    <span class="hljs-keyword">return</span> pinyin_get_date(<span class="hljs-string">&quot;&quot;</span>)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">local</span> _MATH_SYMBOL = &#123;<br><span class="hljs-string">&quot;＋&quot;</span>,<br><span class="hljs-string">&quot;－&quot;</span>,<br><span class="hljs-string">&quot;＜&quot;</span>,<br><span class="hljs-string">&quot;＝&quot;</span>,<br><span class="hljs-string">&quot;＞&quot;</span>,<br><span class="hljs-string">&quot;±&quot;</span>,<br><span class="hljs-string">&quot;×&quot;</span>,<br><span class="hljs-string">&quot;÷&quot;</span>,<br><span class="hljs-string">&quot;∈&quot;</span>,<br><span class="hljs-string">&quot;∏&quot;</span>,<br><span class="hljs-string">&quot;∑&quot;</span>,<br><span class="hljs-string">&quot;∕&quot;</span>,<br><span class="hljs-string">&quot;√&quot;</span>,<br><span class="hljs-string">&quot;∝&quot;</span>,<br><span class="hljs-string">&quot;∞&quot;</span>,<br><span class="hljs-string">&quot;∟&quot;</span>,<br><span class="hljs-string">&quot;∠&quot;</span>,<br><span class="hljs-string">&quot;∣&quot;</span>,<br><span class="hljs-string">&quot;∥&quot;</span>,<br><span class="hljs-string">&quot;∧&quot;</span>,<br><span class="hljs-string">&quot;∨&quot;</span>,<br><span class="hljs-string">&quot;∩&quot;</span>,<br><span class="hljs-string">&quot;∪&quot;</span>,<br><span class="hljs-string">&quot;∫&quot;</span>,<br><span class="hljs-string">&quot;∮&quot;</span>,<br><span class="hljs-string">&quot;∴&quot;</span>,<br><span class="hljs-string">&quot;∵&quot;</span>,<br><span class="hljs-string">&quot;∶&quot;</span>,<br><span class="hljs-string">&quot;∷&quot;</span>,<br><span class="hljs-string">&quot;∽&quot;</span>,<br><span class="hljs-string">&quot;≈&quot;</span>,<br><span class="hljs-string">&quot;≌&quot;</span>,<br><span class="hljs-string">&quot;≒&quot;</span>,<br><span class="hljs-string">&quot;≠&quot;</span>,<br><span class="hljs-string">&quot;≡&quot;</span>,<br><span class="hljs-string">&quot;≤&quot;</span>,<br><span class="hljs-string">&quot;≥&quot;</span>,<br><span class="hljs-string">&quot;≦&quot;</span>,<br><span class="hljs-string">&quot;≧&quot;</span>,<br><span class="hljs-string">&quot;≮&quot;</span>,<br><span class="hljs-string">&quot;≯&quot;</span>,<br><span class="hljs-string">&quot;⊕&quot;</span>,<br><span class="hljs-string">&quot;⊙&quot;</span>,<br><span class="hljs-string">&quot;⊥&quot;</span>,<br><span class="hljs-string">&quot;⊿&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _ROMAN_NUMBER = &#123;<br><span class="hljs-string">&quot;ⅰ&quot;</span>,<br><span class="hljs-string">&quot;ⅱ&quot;</span>,<br><span class="hljs-string">&quot;ⅲ&quot;</span>,<br><span class="hljs-string">&quot;ⅳ&quot;</span>,<br><span class="hljs-string">&quot;ⅴ&quot;</span>,<br><span class="hljs-string">&quot;ⅵ&quot;</span>,<br><span class="hljs-string">&quot;ⅶ&quot;</span>,<br><span class="hljs-string">&quot;ⅷ&quot;</span>,<br><span class="hljs-string">&quot;ⅸ&quot;</span>,<br><span class="hljs-string">&quot;ⅹ&quot;</span>,<br><span class="hljs-string">&quot;ⅰ&quot;</span>,<br><span class="hljs-string">&quot;ⅱ&quot;</span>,<br><span class="hljs-string">&quot;ⅲ&quot;</span>,<br><span class="hljs-string">&quot;ⅳ&quot;</span>,<br><span class="hljs-string">&quot;ⅴ&quot;</span>,<br><span class="hljs-string">&quot;ⅵ&quot;</span>,<br><span class="hljs-string">&quot;ⅶ&quot;</span>,<br><span class="hljs-string">&quot;ⅷ&quot;</span>,<br><span class="hljs-string">&quot;ⅸ&quot;</span>,<br><span class="hljs-string">&quot;ⅹ&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _UPPER_GREEK_LETTER = &#123;<br><span class="hljs-string">&quot;Α&quot;</span>,<br><span class="hljs-string">&quot;Β&quot;</span>,<br><span class="hljs-string">&quot;Γ&quot;</span>,<br><span class="hljs-string">&quot;Δ&quot;</span>,<br><span class="hljs-string">&quot;Ε&quot;</span>,<br><span class="hljs-string">&quot;Ζ&quot;</span>,<br><span class="hljs-string">&quot;Η&quot;</span>,<br><span class="hljs-string">&quot;Θ&quot;</span>,<br><span class="hljs-string">&quot;Ι&quot;</span>,<br><span class="hljs-string">&quot;Κ&quot;</span>,<br><span class="hljs-string">&quot;Λ&quot;</span>,<br><span class="hljs-string">&quot;Μ&quot;</span>,<br><span class="hljs-string">&quot;Ν&quot;</span>,<br><span class="hljs-string">&quot;Ξ&quot;</span>,<br><span class="hljs-string">&quot;Ο&quot;</span>,<br><span class="hljs-string">&quot;Π&quot;</span>,<br><span class="hljs-string">&quot;Ρ&quot;</span>,<br><span class="hljs-string">&quot;Σ&quot;</span>,<br><span class="hljs-string">&quot;Τ&quot;</span>,<br><span class="hljs-string">&quot;Υ&quot;</span>,<br><span class="hljs-string">&quot;Φ&quot;</span>,<br><span class="hljs-string">&quot;Χ&quot;</span>,<br><span class="hljs-string">&quot;Ψ&quot;</span>,<br><span class="hljs-string">&quot;Ω&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _LOWER_GREEK_LETTER = &#123;<br><span class="hljs-string">&quot;α&quot;</span>,<br><span class="hljs-string">&quot;β&quot;</span>,<br><span class="hljs-string">&quot;γ&quot;</span>,<br><span class="hljs-string">&quot;δ&quot;</span>,<br><span class="hljs-string">&quot;ε&quot;</span>,<br><span class="hljs-string">&quot;ζ&quot;</span>,<br><span class="hljs-string">&quot;η&quot;</span>,<br><span class="hljs-string">&quot;θ&quot;</span>,<br><span class="hljs-string">&quot;ι&quot;</span>,<br><span class="hljs-string">&quot;κ&quot;</span>,<br><span class="hljs-string">&quot;λ&quot;</span>,<br><span class="hljs-string">&quot;μ&quot;</span>,<br><span class="hljs-string">&quot;ν&quot;</span>,<br><span class="hljs-string">&quot;ξ&quot;</span>,<br><span class="hljs-string">&quot;ο&quot;</span>,<br><span class="hljs-string">&quot;π&quot;</span>,<br><span class="hljs-string">&quot;ρ&quot;</span>,<br><span class="hljs-string">&quot;σ&quot;</span>,<br><span class="hljs-string">&quot;τ&quot;</span>,<br><span class="hljs-string">&quot;υ&quot;</span>,<br><span class="hljs-string">&quot;φ&quot;</span>,<br><span class="hljs-string">&quot;χ&quot;</span>,<br><span class="hljs-string">&quot;ψ&quot;</span>,<br><span class="hljs-string">&quot;ω&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _UPPER_RUSSIAN_LETTER = &#123;<br><span class="hljs-string">&quot;А&quot;</span>,<br><span class="hljs-string">&quot;Б&quot;</span>,<br><span class="hljs-string">&quot;В&quot;</span>,<br><span class="hljs-string">&quot;Г&quot;</span>,<br><span class="hljs-string">&quot;Д&quot;</span>,<br><span class="hljs-string">&quot;Е&quot;</span>,<br><span class="hljs-string">&quot;Ж&quot;</span>,<br><span class="hljs-string">&quot;З&quot;</span>,<br><span class="hljs-string">&quot;И&quot;</span>,<br><span class="hljs-string">&quot;Й&quot;</span>,<br><span class="hljs-string">&quot;К&quot;</span>,<br><span class="hljs-string">&quot;Л&quot;</span>,<br><span class="hljs-string">&quot;М&quot;</span>,<br><span class="hljs-string">&quot;Н&quot;</span>,<br><span class="hljs-string">&quot;О&quot;</span>,<br><span class="hljs-string">&quot;П&quot;</span>,<br><span class="hljs-string">&quot;Р&quot;</span>,<br><span class="hljs-string">&quot;С&quot;</span>,<br><span class="hljs-string">&quot;Т&quot;</span>,<br><span class="hljs-string">&quot;У&quot;</span>,<br><span class="hljs-string">&quot;Ф&quot;</span>,<br><span class="hljs-string">&quot;Х&quot;</span>,<br><span class="hljs-string">&quot;Ц&quot;</span>,<br><span class="hljs-string">&quot;Ч&quot;</span>,<br><span class="hljs-string">&quot;Ш&quot;</span>,<br><span class="hljs-string">&quot;Щ&quot;</span>,<br><span class="hljs-string">&quot;Ъ&quot;</span>,<br><span class="hljs-string">&quot;Ы&quot;</span>,<br><span class="hljs-string">&quot;Ь&quot;</span>,<br><span class="hljs-string">&quot;Э&quot;</span>,<br><span class="hljs-string">&quot;Ю&quot;</span>,<br><span class="hljs-string">&quot;Я&quot;</span>,<br><span class="hljs-string">&quot;Ё&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _LOWER_RUSSIAN_LETTER = &#123;<br><span class="hljs-string">&quot;а&quot;</span>,<br><span class="hljs-string">&quot;б&quot;</span>,<br><span class="hljs-string">&quot;в&quot;</span>,<br><span class="hljs-string">&quot;г&quot;</span>,<br><span class="hljs-string">&quot;д&quot;</span>,<br><span class="hljs-string">&quot;е&quot;</span>,<br><span class="hljs-string">&quot;ж&quot;</span>,<br><span class="hljs-string">&quot;з&quot;</span>,<br><span class="hljs-string">&quot;и&quot;</span>,<br><span class="hljs-string">&quot;й&quot;</span>,<br><span class="hljs-string">&quot;к&quot;</span>,<br><span class="hljs-string">&quot;л&quot;</span>,<br><span class="hljs-string">&quot;м&quot;</span>,<br><span class="hljs-string">&quot;н&quot;</span>,<br><span class="hljs-string">&quot;о&quot;</span>,<br><span class="hljs-string">&quot;п&quot;</span>,<br><span class="hljs-string">&quot;р&quot;</span>,<br><span class="hljs-string">&quot;с&quot;</span>,<br><span class="hljs-string">&quot;т&quot;</span>,<br><span class="hljs-string">&quot;у&quot;</span>,<br><span class="hljs-string">&quot;ф&quot;</span>,<br><span class="hljs-string">&quot;х&quot;</span>,<br><span class="hljs-string">&quot;ц&quot;</span>,<br><span class="hljs-string">&quot;ч&quot;</span>,<br><span class="hljs-string">&quot;ш&quot;</span>,<br><span class="hljs-string">&quot;щ&quot;</span>,<br><span class="hljs-string">&quot;ъ&quot;</span>,<br><span class="hljs-string">&quot;ы&quot;</span>,<br><span class="hljs-string">&quot;ь&quot;</span>,<br><span class="hljs-string">&quot;э&quot;</span>,<br><span class="hljs-string">&quot;ю&quot;</span>,<br><span class="hljs-string">&quot;я&quot;</span>,<br><span class="hljs-string">&quot;ё&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _NUMBER_SYMBOL = &#123;<br><span class="hljs-string">&quot;①&quot;</span>,<br><span class="hljs-string">&quot;②&quot;</span>,<br><span class="hljs-string">&quot;③&quot;</span>,<br><span class="hljs-string">&quot;④&quot;</span>,<br><span class="hljs-string">&quot;⑤&quot;</span>,<br><span class="hljs-string">&quot;⑥&quot;</span>,<br><span class="hljs-string">&quot;⑦&quot;</span>,<br><span class="hljs-string">&quot;⑧&quot;</span>,<br><span class="hljs-string">&quot;⑨&quot;</span>,<br><span class="hljs-string">&quot;⑩&quot;</span>,<br><span class="hljs-string">&quot;⑴&quot;</span>,<br><span class="hljs-string">&quot;⑵&quot;</span>,<br><span class="hljs-string">&quot;⑶&quot;</span>,<br><span class="hljs-string">&quot;⑷&quot;</span>,<br><span class="hljs-string">&quot;⑸&quot;</span>,<br><span class="hljs-string">&quot;⑹&quot;</span>,<br><span class="hljs-string">&quot;⑺&quot;</span>,<br><span class="hljs-string">&quot;⑻&quot;</span>,<br><span class="hljs-string">&quot;⑼&quot;</span>,<br><span class="hljs-string">&quot;⑽&quot;</span>,<br><span class="hljs-string">&quot;⑾&quot;</span>,<br><span class="hljs-string">&quot;⑿&quot;</span>,<br><span class="hljs-string">&quot;⒀&quot;</span>,<br><span class="hljs-string">&quot;⒁&quot;</span>,<br><span class="hljs-string">&quot;⒂&quot;</span>,<br><span class="hljs-string">&quot;⒃&quot;</span>,<br><span class="hljs-string">&quot;⒄&quot;</span>,<br><span class="hljs-string">&quot;⒅&quot;</span>,<br><span class="hljs-string">&quot;⒆&quot;</span>,<br><span class="hljs-string">&quot;⒇&quot;</span>,<br><span class="hljs-string">&quot;⒈&quot;</span>,<br><span class="hljs-string">&quot;⒉&quot;</span>,<br><span class="hljs-string">&quot;⒊&quot;</span>,<br><span class="hljs-string">&quot;⒋&quot;</span>,<br><span class="hljs-string">&quot;⒌&quot;</span>,<br><span class="hljs-string">&quot;⒍&quot;</span>,<br><span class="hljs-string">&quot;⒎&quot;</span>,<br><span class="hljs-string">&quot;⒏&quot;</span>,<br><span class="hljs-string">&quot;⒐&quot;</span>,<br><span class="hljs-string">&quot;⒑&quot;</span>,<br><span class="hljs-string">&quot;⒒&quot;</span>,<br><span class="hljs-string">&quot;⒓&quot;</span>,<br><span class="hljs-string">&quot;⒔&quot;</span>,<br><span class="hljs-string">&quot;⒕&quot;</span>,<br><span class="hljs-string">&quot;⒖&quot;</span>,<br><span class="hljs-string">&quot;⒗&quot;</span>,<br><span class="hljs-string">&quot;⒘&quot;</span>,<br><span class="hljs-string">&quot;⒙&quot;</span>,<br><span class="hljs-string">&quot;⒚&quot;</span>,<br><span class="hljs-string">&quot;⒛&quot;</span>,<br><span class="hljs-string">&quot;㈠&quot;</span>,<br><span class="hljs-string">&quot;㈡&quot;</span>,<br><span class="hljs-string">&quot;㈢&quot;</span>,<br><span class="hljs-string">&quot;㈣&quot;</span>,<br><span class="hljs-string">&quot;㈤&quot;</span>,<br><span class="hljs-string">&quot;㈥&quot;</span>,<br><span class="hljs-string">&quot;㈦&quot;</span>,<br><span class="hljs-string">&quot;㈧&quot;</span>,<br><span class="hljs-string">&quot;㈨&quot;</span>,<br><span class="hljs-string">&quot;㈩&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _CURRENCY_SYMBOL = &#123;<br><span class="hljs-string">&quot;＄&quot;</span>,<br><span class="hljs-string">&quot;￠&quot;</span>,<br><span class="hljs-string">&quot;￡&quot;</span>,<br><span class="hljs-string">&quot;￥&quot;</span>,<br><span class="hljs-string">&quot;¤&quot;</span>,<br>&#125;<br><br><span class="hljs-keyword">local</span> _ARROW_SYMBOL = &#123;<br><span class="hljs-string">&quot;←&quot;</span>,<br><span class="hljs-string">&quot;↑&quot;</span>,<br><span class="hljs-string">&quot;→&quot;</span>,<br><span class="hljs-string">&quot;↓&quot;</span>,<br><span class="hljs-string">&quot;↖&quot;</span>,<br><span class="hljs-string">&quot;↗&quot;</span>,<br><span class="hljs-string">&quot;↘&quot;</span>,<br><span class="hljs-string">&quot;↙&quot;</span>,<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pinyin_get_symbol</span><span class="hljs-params">(input)</span></span><br>    <span class="hljs-keyword">if</span> fcitx.currentInputMethod() ~= <span class="hljs-string">&quot;pinyin&quot;</span> <span class="hljs-keyword">and</span> fcitx.currentInputMethod() ~= <span class="hljs-string">&quot;shuangpin&quot;</span>  <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> &#123;<br>            &#123;suggest=<span class="hljs-string">&quot;sx&quot;</span>, help=<span class="hljs-string">&quot;数学符号&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;lmsz&quot;</span>, help=<span class="hljs-string">&quot;罗马数字&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;dxxl&quot;</span>, help=<span class="hljs-string">&quot;大写希腊&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;xxxl&quot;</span>, help=<span class="hljs-string">&quot;小写希腊&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;dxew&quot;</span>, help=<span class="hljs-string">&quot;大写俄文&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;xxew&quot;</span>, help=<span class="hljs-string">&quot;小写俄文&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;sz&quot;</span>, help=<span class="hljs-string">&quot;数字符号&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;hb&quot;</span>, help=<span class="hljs-string">&quot;货币&quot;</span>&#125;,<br>            &#123;suggest=<span class="hljs-string">&quot;jt&quot;</span>, help=<span class="hljs-string">&quot;箭头&quot;</span>&#125;,<br>        &#125;<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;sx&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _MATH_SYMBOL<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;lmsz&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _ROMAN_NUMBER<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;dxxl&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _UPPER_GREEK_LETTER<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;xxxl&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _LOWER_GREEK_LETTER<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;dxew&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _UPPER_RUSSIAN_LETTER<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;xxew&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _LOWER_RUSSIAN_LETTER<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;sz&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _NUMBER_SYMBOL<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;hb&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _CURRENCY_SYMBOL<br>    <span class="hljs-keyword">elseif</span> <span class="hljs-built_in">input</span> == <span class="hljs-string">&quot;jt&quot;</span> <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">return</span> _ARROW_SYMBOL<br>    <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">------------</span><br>ime.register_command(<span class="hljs-string">&quot;fh&quot;</span>, <span class="hljs-string">&quot;pinyin_get_symbol&quot;</span>, <span class="hljs-string">&quot;输入符号&quot;</span>, <span class="hljs-string">&quot;digit&quot;</span>, <span class="hljs-string">&quot;&quot;</span>)<br><br>ime.register_command(<span class="hljs-string">&quot;sj&quot;</span>, <span class="hljs-string">&quot;pinyin_get_time&quot;</span>, <span class="hljs-string">&quot;输入时间&quot;</span>, <span class="hljs-string">&quot;alpha&quot;</span>, <span class="hljs-string">&quot;输入可选时间，例如12:34&quot;</span>)<br>ime.register_command(<span class="hljs-string">&quot;rq&quot;</span>, <span class="hljs-string">&quot;pinyin_get_date&quot;</span>, <span class="hljs-string">&quot;输入日期&quot;</span>, <span class="hljs-string">&quot;alpha&quot;</span>, <span class="hljs-string">&quot;输入可选日期，例如2013-01-01&quot;</span>)<br>ime.register_trigger(<span class="hljs-string">&quot;pinyin_get_current_time&quot;</span>, <span class="hljs-string">&quot;显示时间&quot;</span>, &#123;&#125;, &#123;<span class="hljs-string">&#x27;时间&#x27;</span>&#125;)<br>ime.register_trigger(<span class="hljs-string">&quot;pinyin_get_today&quot;</span>, <span class="hljs-string">&quot;显示日期&quot;</span>, &#123;&#125;, &#123;<span class="hljs-string">&#x27;日期&#x27;</span>&#125;)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>fcitx5</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>fcitx5</tag>
      
      <tag>lua</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vite 配置 API 代理</title>
    <link href="/2023/07/20/18973405fd0.html"/>
    <url>/2023/07/20/18973405fd0.html</url>
    
    <content type="html"><![CDATA[<p>当你本地开发遇到跨域问题时，可以尝试在 Vite 项目中配置 API 代理帮助转发对应的接口，参考 <a href="https://cn.vitejs.dev/config/">Vite 文档</a>。</p><span id="more"></span><blockquote><p>记录一下当前项目中的配置</p></blockquote><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;proxy:dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite --debug serve --mode proxy-dev --config vite-enable-proxy.config.ts&quot;</span><br>    <span class="hljs-attr">&quot;proxy:qa&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite --debug serve --mode proxy-qa --config vite-enable-proxy.config.ts&quot;</span><br>    <span class="hljs-attr">&quot;proxy:prod&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite --debug serve --mode proxy-prod --config vite-enable-proxy.config.ts&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="vite-enable-proxy-config-ts"><a href="#vite-enable-proxy-config-ts" class="headerlink" title="vite-enable-proxy.config.ts"></a>vite-enable-proxy.config.ts</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; defineConfig, <span class="hljs-keyword">type</span> <span class="hljs-title class_">UserConfig</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span>;<br><span class="hljs-keyword">import</span> viteConfig <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./vite.config&#x27;</span>;<br><br><span class="hljs-comment">// https://vitejs.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">&#123; mode &#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 加载不同的代理配置</span><br>  <span class="hljs-keyword">let</span> <span class="hljs-attr">proxy</span>: <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">UserConfig</span>&gt;[<span class="hljs-string">&#x27;server&#x27;</span>][<span class="hljs-string">&#x27;proxy&#x27;</span>] = <span class="hljs-literal">undefined</span>;<br>  <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">&#x27;proxy-dev&#x27;</span>) &#123;<br>    proxy = proxyConfig[<span class="hljs-string">&#x27;dev&#x27;</span>];<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">&#x27;proxy-qa&#x27;</span>) &#123;<br>    proxy = proxyConfig[<span class="hljs-string">&#x27;qa&#x27;</span>];<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">&#x27;proxy-prep&#x27;</span>) &#123;<br>    proxy = proxyConfig[<span class="hljs-string">&#x27;prep&#x27;</span>];<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    proxy = <span class="hljs-literal">undefined</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> draft = &#123;<br>    ...viteConfig,<br>    <span class="hljs-attr">server</span>: &#123;<br>      ...viteConfig[<span class="hljs-string">&#x27;server&#x27;</span>],<br>      proxy,<br>    &#125;,<br>  &#125;;<br>  <span class="hljs-comment">// console.log(draft.server);</span><br>  <span class="hljs-keyword">return</span> draft;<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">proxyConfig</span>: &#123; [key <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;dev&#x27;</span> | <span class="hljs-string">&#x27;qa&#x27;</span> | <span class="hljs-string">&#x27;prep&#x27;</span>]?: <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">UserConfig</span>&gt;[<span class="hljs-string">&#x27;server&#x27;</span>][<span class="hljs-string">&#x27;proxy&#x27;</span>] &#125; = &#123;<br>  <span class="hljs-attr">dev</span>: &#123;<br>    <span class="hljs-string">&#x27;/PROXY_DOMAIN&#x27;</span>: &#123;<br>      <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;https://devapi.domain.com&#x27;</span>,<br>      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">rewrite</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/PROXY_AAA/</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">qa</span>: &#123;<br>    <span class="hljs-string">&#x27;/PROXY_DOMAIN&#x27;</span>: &#123;<br>      <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;https://qaapi.domain.com&#x27;</span>,<br>      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">rewrite</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/PROXY_DOMAIN/</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">prep</span>: &#123;<br>    <span class="hljs-string">&#x27;/PROXY_DOMAIN&#x27;</span>: &#123;<br>      <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;https://prepapi.domain.com&#x27;</span>,<br>      <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">rewrite</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/PROXY_DOMAIN/</span>, <span class="hljs-string">&#x27;&#x27;</span>),<br>    &#125;,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>vite</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>vite</tag>
      
      <tag>proxy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo 使用自定义脚本创建永久链接</title>
    <link href="/2023/07/20/18973140c28.html"/>
    <url>/2023/07/20/18973140c28.html</url>
    
    <content type="html"><![CDATA[<p>在使用自定义脚本之前一直使用 <code>hexo</code> 配置的 <code>年月日 + hash</code> 的方式生成的永久链接，而且一直是本地生成 + 手动部署的静态文件。</p><span id="more"></span><p>起因是换了一台电脑部署之后永久链接都被更新了，经过查阅原来是<code>hexo</code>对于文件<code>hash</code>的计算使用了文件的<code>创建时间</code>，但并不是所有的 操作&#x2F;文件系统 都有<code>创建时间</code>属性，当在 <code>unix-like</code> 系统中 <code>build</code> 时，便出现了所有的永久链接都重新生成的问题。这个影响会搜索引擎的收录和用户书签，所以创建一个不会被改变的永久链接就迫在眉睫。</p><blockquote><p>下面的是本站使用的自定义脚本，使用了 md 文件中的 date 字段转换成 unix 时间的16进制。因为这个时间精确到了秒，所以在大部分非极端的情况下这个时间对于每一个 markdown 文件都是唯一的。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 根据 创建时间 自定义文章永久链接，使用子文件夹管理文章且不改变文章永久链接</span><br><span class="hljs-comment"> * e.g. &quot;source/_posts/2019/slug.md&quot; =&gt; &quot;https://hexo.example/year/month/day/date_hexo.html&quot;</span><br><span class="hljs-comment"> */</span><br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">filter</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;post_permalink&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">post_permalink</span>) &#123;<br>    <span class="hljs-keyword">const</span> [date, time] = post_permalink.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;|&#x27;</span>);<br>    <span class="hljs-keyword">const</span> [year, month, day] = date.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>)<br>    <span class="hljs-keyword">const</span> date_path = <span class="hljs-string">`<span class="hljs-subst">$&#123;year&#125;</span>/<span class="hljs-subst">$&#123;month&#125;</span>/<span class="hljs-subst">$&#123;day&#125;</span>`</span>;<br>    <span class="hljs-keyword">const</span> unixTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;date&#125;</span>T<span class="hljs-subst">$&#123;time&#125;</span>.000+08:00`</span>).<span class="hljs-title function_">getTime</span>()<br>    <span class="hljs-keyword">const</span> date_hex = <span class="hljs-title class_">Number</span>.<span class="hljs-built_in">parseInt</span>(unixTime, <span class="hljs-number">10</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>);<br>    <span class="hljs-keyword">const</span> permalink = <span class="hljs-string">`<span class="hljs-subst">$&#123;date_path&#125;</span>/<span class="hljs-subst">$&#123;date_hex&#125;</span>.html`</span>;<br>    <span class="hljs-keyword">return</span> permalink;<br>&#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
      <category>permalink</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>permalink</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>前端笔记</title>
    <link href="/2023/07/20/18972fda5c8.html"/>
    <url>/2023/07/20/18972fda5c8.html</url>
    
    <content type="html"><![CDATA[<h2 id="没有分类的前端笔记"><a href="#没有分类的前端笔记" class="headerlink" title="没有分类的前端笔记"></a>没有分类的前端笔记</h2><span id="more"></span><h3 id="Webkit-对-lt-svg-gt-whitespace-属性的支持问题"><a href="#Webkit-对-lt-svg-gt-whitespace-属性的支持问题" class="headerlink" title="Webkit 对 &lt;svg&gt; whitespace 属性的支持问题"></a>Webkit 对 &lt;svg&gt; whitespace 属性的支持问题</h3><p>如果 svg 文件中<code>&lt;tspan&gt;</code>标签没有指定 <code>whitespace</code> 的属性，Webkit 浏览器将会忽略祖先元素的属性，没有被继承。<a href="https://github.com/fabricjs/fabric.js/pull/4294">fabric.js</a>中提到了这个问题。</p><blockquote><p><strong>本站顶部的 banner 图片是一个 ASCII 字符组成的 svg 图像，这个问题是在绘制这个图像的时候发现的[2023-07-20]</strong></p></blockquote><h2 id="浏览器对-lt-img-gt-alt-属性的表现"><a href="#浏览器对-lt-img-gt-alt-属性的表现" class="headerlink" title="浏览器对 &lt;img&gt; alt 属性的表现"></a>浏览器对 &lt;img&gt; alt 属性的表现</h2><p>如果把这个属性设置为空字符串（alt&#x3D;””），则表明该图像不是内容的关键部分（这是一种装饰或者一个追踪像素点），非可视化浏览器在渲染的时候可能会忽略它。而且，如果图片加载失败，可视化浏览器会隐藏表示图片损坏的图标。<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/img#%E5%B1%9E%E6%80%A7">MDN</a></p><blockquote><p><strong>本站底部的 <code>badge</code> 图标就应用了这个特性在用户网络不佳的情况下不展示破碎的图标。[2023-07-17]</strong></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>notes</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>notes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何在 Unix-like-System 获得 Figma-web 本地字体的支持</title>
    <link href="/2023/07/20/189715ab7b0.html"/>
    <url>/2023/07/20/189715ab7b0.html</url>
    
    <content type="html"><![CDATA[如何在 Unix-like-System 获得 Figma-web 本地字体的支持<span id="more"></span><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><a href="https://www.figma.com/">Figma</a> 为 <code>OS X</code> 和 <code>Windows</code> 提供了名为 <a href="https://www.figma.com/downloads/">Font installers</a> 的软件以提供在 Web 中选择并使用本地字体的功能。<br>虽然官方没有支持 <code>Unix-like</code>，但幸运的是开源社区提供的 <a href="https://github.com/Figma-Linux/figma-linux-font-helper">figma-linux-font-helper</a> 项目实现了类似功能。</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>通过<code>http</code>服务在本地端口提供了一个字体列表的接口，支持配置扫描的字体目录，默认系统目录，可以自定义添加用户的字体目录。</p><h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><ul><li>参照项目的 <code>Readme</code> 文档 通过 <code>systemctl</code> 使用 </li><li>下载 Release 文件，在需要的时候手动执行其中的 <code>fonthelper</code> 二进制文件。</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>Figma</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Figma</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git 常用命令</title>
    <link href="/2023/07/06/18929dcbb18.html"/>
    <url>/2023/07/06/18929dcbb18.html</url>
    
    <content type="html"><![CDATA[<p>今天闲来无事，记录一下 git 常用的命令</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看分支信息</span><br>git branch -vv<br><br><span class="hljs-comment"># 重命名分支</span><br>git branch -m &lt;新分支名称&gt; (当前分支)<br><br><span class="hljs-comment"># 重命名分支 </span><br>git branch -m &lt;旧分支名称&gt; &lt;新分支名称&gt; (非当前分支) <br><br><span class="hljs-comment"># 关联远程分支</span><br>git branch --set-upstream-to=&lt;主机名称&gt; &lt;分支名称&gt;<br><br><span class="hljs-comment"># 关联远程主机</span><br>git remote add &lt;主机名称&gt; &lt;主机地址&gt;<br><br><span class="hljs-comment"># 删除远程地址</span><br>git remote remove &lt;主机名称&gt;<br><br><span class="hljs-comment"># 重命名远程地址</span><br>git remote rename &lt;旧主机名称&gt; &lt;新主机名称&gt;<br><br>git stash push -S -m &lt;message&gt;<br><br><span class="hljs-comment"># 删除远程分支</span><br>git push --delete &lt;主机名称&gt; &lt;分支名称&gt;<br><br><span class="hljs-comment"># git 对比两次提交 差异的文件 打包</span><br>git diff &lt;commitID&gt; &lt;commitID&gt; --name-only | xargs zip diff.zip<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSS box-shadow 动画</title>
    <link href="/2023/06/28/189009e1b48.html"/>
    <url>/2023/06/28/189009e1b48.html</url>
    
    <content type="html"><![CDATA[<p>偶然看到效果不错使用 <code>box-shadow</code> 的 <code>css</code> 动画。<br>点此在 <a href="/skip_render/css-animate/box-shadow.html" target="blank">[新页面预览]</a></p><span id="more"></span><h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><iframe title="box shadow animate" width="300" height="300" style="border: none; width: 100%" src="/skip_render/css-animate/box-shadow.html"></iframe><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Shadow<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.box</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">100px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">100px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">:after</span>,</span><br><span class="language-css">        <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;&quot;</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">66%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            -webkit-<span class="hljs-attribute">transform-origin</span>: center center;</span><br><span class="language-css">            -ms-<span class="hljs-attribute">transform-origin</span>: center center;</span><br><span class="language-css">            <span class="hljs-attribute">transform-origin</span>: center center;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">:after</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">250</span>, <span class="hljs-number">250</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>),</span><br><span class="language-css">                inset <span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">250</span>, <span class="hljs-number">200</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>),</span><br><span class="language-css">                inset <span class="hljs-number">0</span> -<span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">250</span>, <span class="hljs-number">150</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>),</span><br><span class="language-css">                inset -<span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">250</span>, <span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>);</span><br><span class="language-css">            -webkit-<span class="hljs-attribute">animation</span>: rotar <span class="hljs-number">2s</span> -<span class="hljs-number">0.5s</span> linear infinite;</span><br><span class="language-css">            <span class="hljs-attribute">animation</span>: rotar <span class="hljs-number">2s</span> -<span class="hljs-number">0.5s</span> linear infinite;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">250</span>, <span class="hljs-number">250</span>, <span class="hljs-number">0.6</span>),</span><br><span class="language-css">                inset <span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>, <span class="hljs-number">0.6</span>),</span><br><span class="language-css">                inset <span class="hljs-number">0</span> -<span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">150</span>, <span class="hljs-number">200</span>, <span class="hljs-number">0.6</span>),</span><br><span class="language-css">                inset -<span class="hljs-number">23.33333333px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">200</span>, <span class="hljs-number">250</span>, <span class="hljs-number">0.6</span>);</span><br><span class="language-css">            -webkit-<span class="hljs-attribute">animation</span>: rotarIz <span class="hljs-number">2s</span> -<span class="hljs-number">0.5s</span> linear infinite;</span><br><span class="language-css">            <span class="hljs-attribute">animation</span>: rotarIz <span class="hljs-number">2s</span> -<span class="hljs-number">0.5s</span> linear infinite;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-keyword">@-webkit-keyframes</span> rotar &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">50%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.82</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.95</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.82</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.95</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-keyword">@keyframes</span> rotar &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">50%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.82</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.95</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.82</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.95</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-keyword">@-webkit-keyframes</span> rotarIz &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">50%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.95</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.85</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.95</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.85</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-keyword">@keyframes</span> rotarIz &#123;</span><br><span class="language-css">            <span class="hljs-number">0%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(<span class="hljs-number">0deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">50%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.95</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.85</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">180deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">0.95</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">0.85</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-number">100%</span> &#123;</span><br><span class="language-css">                -webkit-<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateZ</span>(-<span class="hljs-number">360deg</span>) <span class="hljs-built_in">scaleX</span>(<span class="hljs-number">1</span>) <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>css</category>
      
      <category>animate</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>css</tag>
      
      <tag>animate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KDE theme directories</title>
    <link href="/2023/06/25/188f08a1810.html"/>
    <url>/2023/06/25/188f08a1810.html</url>
    
    <content type="html"><![CDATA[<p>KDE 主题目录</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/.local/share/aurorae/<br><span class="hljs-built_in">cd</span> ~/.local/share/plasma/wallpapers/<br><span class="hljs-built_in">cd</span> ~/.local/share/plasma/desktoptheme/ <br><span class="hljs-built_in">cd</span> ~/.local/share/plasma/look-and-feel/<br><span class="hljs-built_in">cd</span> ~/.local/share/plasma/layout-templates/<br><br>// <span class="hljs-built_in">local</span> plugins folder<br><span class="hljs-built_in">cd</span> ~/home/suse/.local/share/plasma/plasmoids/<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>KDE</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>KDE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>在 Linux &quot;rpm&quot; 系发行版上运行钉钉应用程序</title>
    <link href="/2023/06/16/188c2ae4970.html"/>
    <url>/2023/06/16/188c2ae4970.html</url>
    
    <content type="html"><![CDATA[<p>今天尝试了一下，如何在 <code>openSUSE Tumbleweed 20230613</code> 上运行钉钉 linux 版本，现在记录一下过程。</p><span id="more"></span><p>首先去官网下载 dingtalk 的 deb 包，毕竟官方支持的发行版有限，只有deb系列有包可以直接安装，可能即使安装成功也不一定能完全运行。<br><a href="https://dtapp-pub.dingtalk.com/dingtalk-desktop/xc_dingtalk_update/linux_deb/Release/com.alibabainc.dingtalk_1.8.0.30601_amd64.deb">点击这里可以下载dingtalk_1.8.0.30601版本</a>，然后当作压缩文件解压到某个位置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[~/Documents/com.alibabainc.dingtalk_1.8.0.30601_amd64]<br>└─$ <span class="hljs-built_in">ls</span> -al<br>total 242776<br>drwxr-xr-x 1 suse suse        84 Jun 16 13:27 .<br>drwxr-xr-x 1 suse suse      2060 Jun 16 11:25 ..<br>-rw-r--r-- 1 suse suse     66520 Jun  1 12:05 control.tar.xz<br>-rw-r--r-- 1 suse suse 248528292 Jun  1 12:05 data.tar.xz<br>-rw-r--r-- 1 suse suse         4 Jun  1 12:05 debian-binary<br></code></pre></td></tr></table></figure><p>我们继续解压 data.tar.xz</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[~/Documents/com.alibabainc.dingtalk_1.8.0.30601_amd64]<br>└─$ <span class="hljs-built_in">ls</span> -al<br>total 242776<br>drwxr-xr-x 1 suse suse        84 Jun 16 13:27 .<br>drwxr-xr-x 1 suse suse      2060 Jun 16 11:25 ..<br>-rw-r--r-- 1 suse suse     66520 Jun  1 12:05 control.tar.xz<br>drwxr-xr-x 1 suse suse        12 Jun 16 13:27 data<br>-rw-r--r-- 1 suse suse 248528292 Jun  1 12:05 data.tar.xz<br>-rw-r--r-- 1 suse suse         4 Jun  1 12:05 debian-binary<br><br></code></pre></td></tr></table></figure><p>现在我们进入 <code>data</code> 目录，其中 <code>opt</code> 目录下是我们所需要的文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[~/Documents/com.alibabainc.dingtalk_1.8.0.30601_amd64/data]<br>└─$ <span class="hljs-built_in">ls</span> -al<br>total 0<br>drwxr-xr-x 1 suse suse 12 Jun 16 13:27 .<br>drwxr-xr-x 1 suse suse 84 Jun 16 13:27 ..<br>drwxr-xr-x 1 suse suse  8 Jun 16 13:27 opt<br>drwxr-xr-x 1 suse suse 10 Jun 16 13:27 usr<br></code></pre></td></tr></table></figure><p>我习惯将手动安装的软件放在<code>opt</code>目录下，所以接下来我会将软件移动到<code>opt</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo <span class="hljs-built_in">mv</span> ./opt/apps /opt<br></code></pre></td></tr></table></figure><p>导航到 <code>/opt</code>,可以看到我们的目录是下面这样，如果你本来就有<code>apps</code>目录，自行选择合适的方式处理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[/opt]<br>└─$ <span class="hljs-built_in">ls</span> -al<br>total 0<br>dr-xr-xr-x 1 suse suse 208 Jun 16 13:45 .<br>drwxr-xr-x 1 root root 142 Oct 18  2022 ..<br>drwxr-xr-x 1 suse suse  46 Jun 16 13:27 apps<br>...<br>...<br>drwxr-xr-x 1 root root 122 Apr 27 16:19 wemeet<br></code></pre></td></tr></table></figure><p>前面的准备工作做完之后我们开始进入正题，如何才能运行这个<code>app</code>，首先我们导航到<br><code>/opt/apps/com.alibabainc.dingtalk/files</code><br>找到名为 <code>Elevator.sh</code>的文件，在终端执行ta，很明显不能正确执行并抛出了一些错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[/opt/apps/com.alibabainc.dingtalk/files]<br>└─$ ./Elevator.sh <br><span class="hljs-string">&quot;opensuse-tumbleweed&quot;</span><br><span class="hljs-string">&quot;opensuse-tumbleweed&quot;</span> branch<br><span class="hljs-string">&quot;opensuse-tumbleweed&quot;</span> glibc lower branch<br>preload_libs=./envlib.so ./libharfbuzz.so.0<br>Load /opt/apps/com.alibabainc.dingtalk/files/1.8.0-Release.30601//dingtalk_dll.so failed! Err=./libm.so.6: version `GLIBC_2.29<span class="hljs-string">&#x27; not found (required by /lib64/libgtk-x11-2.0.so.0)</span><br></code></pre></td></tr></table></figure><p>看来是 <code>dingtalk</code> 自己是自带 <code>libm.so.6</code> 文件而且而系统安装的文件不一致，我们查看并确认一下，确实没有系统文件 <code>/lib64/libgtk-x11-2.0.so.0</code> 所需要的 <code>GLIBC_2.29</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[/opt/apps/com.alibabainc.dingtalk/files]<br>└─$ strings ./1.8.0-Release.30601/libm.so.6 | grep ^GLIBC<br>GLIBC_2.2.5<br>GLIBC_2.4<br>GLIBC_2.15<br>GLIBC_2.18<br>GLIBC_2.23<br>GLIBC_2.24<br>GLIBC_2.25<br>GLIBC_2.26<br>GLIBC_2.27<br>GLIBC_2.28<br>GLIBC_PRIVATE<br></code></pre></td></tr></table></figure><p>所以我们可以手动复制或者软链接一个 <code>/lib64/libm.so.6</code> 下的文件到 <code>release</code> 目录，也可以直接删掉，让系统文件生效。<br>这里我选择新建一个 <code>exclude</code> 目录 将 <code>release</code> 下的 <code>libm.so.6</code> 移动过去，做一个备份。<br>现在我们尝试再次执行 <code>Elevator.sh</code> 会有新的错误抛出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(suse@localhost)-[/opt/apps/com.alibabainc.dingtalk/files/1.8.0-Release.30601]<br>└─$ ./com.alibabainc.dingtalk <br>Load /opt/apps/com.alibabainc.dingtalk/files/1.8.0-Release.30601//dingtalk_dll.so failed! Err=/lib64/libcairo.so.2: undefined symbol: FT_Get_Color_Glyph_Layer<br></code></pre></td></tr></table></figure><p>看起来还是文件版本不一致的文件啊，简单搜索发现<code>libcairo.so.2</code> 这个库和 <code>libfreetype</code> 有关，所以将 <code>release</code> 下的 <code>libfreetype.so.6</code> 和 <code>libfreetype.so.6.16.1</code> 移动到 <code>exclude</code>。继续运行…好了，完成～<br><img src="/./assets/img/dingtalk/dingtalk_login.png" srcset="/img/loading.gif" lazyload alt="dingtalk 登录"><br><img src="/./assets/img/dingtalk/dingtalk_preferences.png" srcset="/img/loading.gif" lazyload alt="dingtalk 设置"><br><img src="/./assets/img/dingtalk/dingtalk_online.png" srcset="/img/loading.gif" lazyload alt="dingtalk 文档"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>office</category>
      
      <category>dingtalk</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>openSUSE</tag>
      
      <tag>openSUSE Tumbleweed</tag>
      
      <tag>office</tag>
      
      <tag>dingtalk</tag>
      
      <tag>钉钉</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>通过 github actions 部署 github pages</title>
    <link href="/2023/06/13/188b3b89ee8.html"/>
    <url>/2023/06/13/188b3b89ee8.html</url>
    
    <content type="html"><![CDATA[<p>这篇文章提供一个思路，利用 <code>git</code> 分支实现 <code>git source</code> 和 <code>github pages</code> 在同一个<code>repo</code>。</p><span id="more"></span><p>从一开始我的博客 <code>source</code> 和 <code>github pages</code> 就分别在两个不同的 <code>repo</code> 并利用 <code>git submodule</code> 来管理，每次发布文章都是通过 <code>hexo</code> 自己的部署功能，久而久之有点疲倦，便想着尝试利用 <code>github actions</code> 在同一个 <code>repo</code> 部署。</p><h4 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h4><p>github pages 是允许我们选择一个分支来部署静态页面的，</p><h4 id="其次"><a href="#其次" class="headerlink" title="其次"></a>其次</h4><p>我们只需要新建一个空白分支（eg: github-pages）用来承载静态文件就可以,</p><h4 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h4><p>当我们 <code>push</code> 之后，会通过 <code>github actions</code> 触发编译 ，将编译产物 <code>push</code> 到我们的空白分支就好了。</p><h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><p>创建钉钉群并添加钉钉消息机器人，可以在 <code>github action</code> 编译完成之后 给我们的发送群消息通知。建议将钉钉的消息 <code>token</code> 以 <code>github-secrets</code> 的形式单独存储，防止被恶意利用。 </p><p>PS：关于如何新建一个空白分支各位观众可以自行搜索。</p><h4 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h4><p>下面是 <code>github actions</code> 的一个实现，其中 <code>BRANCH_SOURCE</code> 和 <code>BRANCH_GITHUB_PAGES</code> 变量可以替换为自己的分支名称，默认是 <code>master</code> 和 <code>github-pages</code>。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deployment</span><br><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span> [<span class="hljs-string">master</span>]<br>    <span class="hljs-attr">paths-ignore:</span> [<span class="hljs-string">.github/workflows/**</span>]<br><br><span class="hljs-attr">env:</span><br>  <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span><br>  <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br>  <span class="hljs-attr">ACTION_BOT_NAME:</span> <span class="hljs-string">github-actions[bot]</span><br>  <span class="hljs-attr">ACTION_BOT_EMAIL:</span> <span class="hljs-string">github-actions[bot]@users.noreply.github.com</span><br>  <span class="hljs-attr">BRANCH_SOURCE:</span> <span class="hljs-string">master</span><br>  <span class="hljs-attr">BRANCH_GITHUB_PAGES:</span> <span class="hljs-string">github-pages</span><br>  <span class="hljs-attr">DINGTALK_ROBOT_ACCESS_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.DINGTALK_ROBOT_ACCESS_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">build:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br><br>    <span class="hljs-attr">strategy:</span><br>      <span class="hljs-attr">matrix:</span><br>        <span class="hljs-attr">node-version:</span> [<span class="hljs-number">16.</span><span class="hljs-string">x</span>]<br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.BRANCH_SOURCE</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.BRANCH_SOURCE</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          cd $&#123;&#123; env.BRANCH_SOURCE &#125;&#125;</span><br><span class="hljs-string">          npm install</span><br><span class="hljs-string">          npm run build</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.BRANCH_GITHUB_PAGES</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">ref:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.BRANCH_GITHUB_PAGES</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.BRANCH_GITHUB_PAGES</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Copy</span> <span class="hljs-string">Files</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          cp -r ./$&#123;&#123; env.BRANCH_SOURCE &#125;&#125;/public/* ./$&#123;&#123; env.BRANCH_GITHUB_PAGES &#125;&#125;</span><br><span class="hljs-string">          cp ./$&#123;&#123; env.BRANCH_SOURCE &#125;&#125;/.gitignore ./$&#123;&#123; env.BRANCH_GITHUB_PAGES &#125;&#125;</span><br><span class="hljs-string">          ls -al ./$&#123;&#123; env.BRANCH_GITHUB_PAGES &#125;&#125;</span><br><span class="hljs-string">          date +%Y-%m-%d\ %H:%M:%S\ %z &gt; ./$&#123;&#123; env.BRANCH_GITHUB_PAGES &#125;&#125;/generated.txt</span><br><span class="hljs-string">          ls -al ./$&#123;&#123; env.BRANCH_GITHUB_PAGES &#125;&#125;</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          cd $&#123;&#123; env.BRANCH_GITHUB_PAGES &#125;&#125;</span><br><span class="hljs-string">          git add .</span><br><span class="hljs-string">          git config user.name $ACTION_BOT_NAME</span><br><span class="hljs-string">          git config user.email $ACTION_BOT_EMAIL</span><br><span class="hljs-string">          git commit -m &quot;Site updated: $(date +%Y-%m-%d\ %H:%M:%S\ %z)&quot;</span><br><span class="hljs-string">          git push</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">DingTalk</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          cd $&#123;&#123; env.BRANCH_SOURCE &#125;&#125;</span><br><span class="hljs-string">          curl --request POST \</span><br><span class="hljs-string">          --url &#x27;https://oapi.dingtalk.com/robot/send?access_token=&#x27;$DINGTALK_ROBOT_ACCESS_TOKEN \</span><br><span class="hljs-string">          --header &#x27;Content-Type: application/json&#x27; \</span><br><span class="hljs-string">          --data &#x27;&#123;</span><br><span class="hljs-string">            &quot;msgtype&quot;: &quot;text&quot;,</span><br><span class="hljs-string">            &quot;at&quot;: &#123;</span><br><span class="hljs-string">              isAtAll: true</span><br><span class="hljs-string">              &#125;,</span><br><span class="hljs-string">            &quot;text&quot;: &#123;</span><br><span class="hljs-string">              &quot;content&quot;: &quot;#### Github-actions[bot] Notification #### \n*项目名称： teddingdev.github.io \n*日期： &#x27;&quot;$(date +%Y-%m-%d\ %H:%M:%S\ %z)&quot;&#x27; \n*路径： &#x27;&quot;$(pwd)&quot;&#x27; \n*Git地址： \n&#x27;&quot;$(git remote -v)&quot;&#x27; \n*分支： &#x27;&quot;$(git name-rev --name-only HEAD)&quot;&#x27; \n*最后提交： \n&#x27;&quot;$(git show -s)&quot;&#x27; \n*Build机器信息： \n&#x27;&quot;$(uname -a)&quot;&#x27; \n*Build机器IP： \n&#x27;&quot;$(ip address | grep &#x27;inet&#x27; | awk &#x27;&#123;print $2&#125;&#x27;)&quot;&#x27; \n\n我就是我, 是颜色不一样的烟火&quot;</span><br><span class="hljs-string">              &#125;</span><br><span class="hljs-string">            &#125;&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>github</category>
      
      <category>github-pages</category>
      
      <category>github-actions</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>github</tag>
      
      <tag>github-pages</tag>
      
      <tag>github-actions</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于 VS Code、Edge、Chrome 中缩放的偏好设置</title>
    <link href="/2023/06/13/188b36d1ae0.html"/>
    <url>/2023/06/13/188b36d1ae0.html</url>
    
    <content type="html"><![CDATA[<p>今天偶然在一个博主的文章中看到了关于 <code>Chrome</code> 、<code>EDGE</code> 配置缩放的问题，很有意思，虽然可选的缩放比例都是整数，但是在存储的时确是一个看似没规律的浮点数。</p><span id="more"></span><p>博主提到了这个数字是可能是一个对数，验证了一下确实是取以 1.2 为底的对数。<br>在 VS Code 设置中是这么描述的 ：</p><blockquote><p><strong>Window: Zoom Level</strong><br>Adjust the zoom level of the window. The original size is 0 and each increment above (e.g. 1) or below (e.g. -1) represents zooming &gt;20% larger or smaller. You can also enter decimals to adjust the zoom level with a finer granularity.</p></blockquote><p>我自己一直将这部分配置为 <code>0.7142857142857143</code>，但可惜的是我并不知道这可能与对数有关。编辑器默认的字体大小是 14 号，而我想要的结果16号，最简单是方式是通过设置编辑区域的字体大小达到目的，但是整个 vscode 窗口的其他部分会显得很突兀，所以我决定用 <code>zoom</code> 属性来达到目的。最简单的计算方式是根据描述得到的 下面这个</p><blockquote><p>14 * ( 0.2 * zoomLevel + 1 ) &#x3D; 16</p></blockquote><p>简单算一下就可以得到 (( 16 &#x2F; 14 ) - 1 ) &#x2F; 0.2 &#x3D; <code>0.7142857142857143</code> 的结果。<br>当得知这个缩放值是对数的时候，我们可以更简单的计算出</p><blockquote><p>Math.log(16&#x2F;14) &#x2F; Math.log(1.2) </p></blockquote><p>16: 目标字体大小<br>14: 当前字体大小</p><p>了解缩放值是怎么来的以后，我们就可以开始随心所欲了。Chrome、Edge 和 Firefox 中都可以配置浏览器的默认缩放级别，但是它们的选项并不相同，为了配合 KDE 桌面设置字体大小，Firefox 一直默认配置全局缩放 120%，到了 Chromium 系之后就只有125% 可选了，虽然不能直接设置，但我们可以通过直接修改偏好设置文件达到我们的目的。</p><blockquote><p>~&#x2F;.config&#x2F;microsoft-edge&#x2F;Default&#x2F;Preferences</p></blockquote><p>打开之后 找到 <code>&#123;&quot;default_zoom_level&quot;:&#123;&quot;x&quot;:zoomLevel&#125;</code> 替换 <code>zoomLevel</code> 的值为 <code>1</code> 保存后就生效了。</p><blockquote><p>zoomLevel &#x3D; Math.log(1.2) &#x2F; Math.log(1.2)</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>VS Code</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VS Code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>在 Linux 终端中预览图片的工具 [Terminal image viewer]</title>
    <link href="/2023/06/12/188ad5277b8.html"/>
    <url>/2023/06/12/188ad5277b8.html</url>
    
    <content type="html"><![CDATA[<p>在阅读最近一版的 <code>Visual Studio Code</code> <a href="https://code.visualstudio.com/updates/v1_79">Release Notes</a> 时注意到内置的终端已经支持了 <code>Images in the terminal</code>。</p><span id="more"></span><p>想要体验可以手动在设置中开启</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;terminal.integrated.experimentalImageSupport&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br></code></pre></td></tr></table></figure><p>你可以使用 <a href="https://pypi.org/project/imgcat/">imgcat python package</a> 或者 <a href="https://iterm2.com/documentation-images.html">imgcat script</a> 在终端预览 png, gif, jpg 文件。</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>Terminal</category>
      
      <category>Shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>VS Code</tag>
      
      <tag>Terminal</tag>
      
      <tag>Shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Angular format number pipe</title>
    <link href="/2023/06/06/1888f9ead68.html"/>
    <url>/2023/06/06/1888f9ead68.html</url>
    
    <content type="html"><![CDATA[Angular format number pipe<span id="more"></span><p>Angular <code>pipe</code>，用来自定义格式化页面中的数字，通过配置 最多小数位数 和 最少小数位数，截取小数位或者在小数位尾部补<code>0</code>。<br>如：<br>3.133 -&gt; 3.13<br>3.1 -&gt; 3.10</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Pipe</span>, <span class="hljs-title class_">PipeTransform</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;<br><br><span class="hljs-meta">@Pipe</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;formatNumberPipe&#x27;</span>,<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormatNumberPipe</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PipeTransform</span> &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * 数字字符 格式化; 默认最少 2 位小数，最多 4 位小数，可配置</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@description</span>  数字字符 格式化</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> value: 输入值</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> minFractionDigits: 小数点后最小位数 默认 2</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> maxFractionDigits: 小数点后最大位数 默认 4</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-title function_">transform</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>, minFractionDigits = <span class="hljs-number">2</span>, maxFractionDigits = <span class="hljs-number">4</span>): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">let</span> originValue = value;<br>    <span class="hljs-keyword">if</span> (!originValue &amp;&amp; originValue !== <span class="hljs-number">0</span>) &#123;<br>      originValue = <span class="hljs-string">&#x27;&#x27;</span>;<br>      <span class="hljs-keyword">return</span> originValue;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> originValue === <span class="hljs-string">&#x27;string&#x27;</span> &amp;&amp; <span class="hljs-built_in">isNaN</span>(<span class="hljs-title class_">Number</span>(originValue))) &#123;<br>      <span class="hljs-keyword">return</span> originValue;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      originValue = <span class="hljs-title class_">Number</span>(originValue);<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> isInteger = originValue % <span class="hljs-number">1</span> === <span class="hljs-number">0</span>; <span class="hljs-comment">// 是否是整数</span><br>    <span class="hljs-comment">// 整数</span><br>    <span class="hljs-keyword">if</span> (isInteger) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;originValue.toFixed(minFractionDigits)&#125;</span>`</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 浮点数</span><br>      <span class="hljs-keyword">const</span> fractionDigits = <span class="hljs-title class_">String</span>(originValue).<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">1</span>];<br>      <span class="hljs-keyword">if</span> (fractionDigits.<span class="hljs-property">length</span> &gt; maxFractionDigits) &#123;<br>        <span class="hljs-keyword">return</span> originValue.<span class="hljs-title function_">toFixed</span>(maxFractionDigits); <span class="hljs-comment">// 按 最大 小数 位数 保留</span><br>      &#125;<br>      <span class="hljs-keyword">if</span> (fractionDigits.<span class="hljs-property">length</span> &lt; minFractionDigits) &#123;<br>        <span class="hljs-keyword">return</span> originValue.<span class="hljs-title function_">toFixed</span>(minFractionDigits); <span class="hljs-comment">// 按 最小 小数 位数 保留</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;value&#125;</span>`</span>; <span class="hljs-comment">// 返回原始值</span><br>    &#125;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>Angular</category>
      
      <category>Pipe</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>Angular</tag>
      
      <tag>Pipe</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue CURD Class</title>
    <link href="/2023/06/06/1888f402630.html"/>
    <url>/2023/06/06/1888f402630.html</url>
    
    <content type="html"><![CDATA[Vue CURD Class<span id="more"></span><h2 id="vue-专属的-curd-类"><a href="#vue-专属的-curd-类" class="headerlink" title="vue 专属的 curd 类"></a>vue 专属的 curd 类</h2><p>在之前 <a href="/2023/03/15/e65d1f7193f4.html">Angular 版本</a>上面作了少量修改，但是默认依然返回 <code>Observable</code>。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/libraries/request&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-keyword">of</span>, <span class="hljs-title class_">Observable</span>, <span class="hljs-keyword">from</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxjs&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; map, filter, mergeMap &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxjs/operators&quot;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; <span class="hljs-title class_">CommonResult</span>, <span class="hljs-title class_">PageResult</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/models/public_api&quot;</span>;<br><br><span class="hljs-keyword">type</span> httpClient = <span class="hljs-keyword">typeof</span> http;<br><span class="hljs-keyword">type</span> joinPathParamsType = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-keyword">typeof</span> joinPath&gt;[<span class="hljs-number">0</span>];<br><br><span class="hljs-keyword">const</span> env = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleError</span> = (<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (env.<span class="hljs-property">MODE</span> !== <span class="hljs-string">&quot;prod&quot;</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> isNonNull&lt;T&gt;(<span class="hljs-attr">value</span>: T): value is <span class="hljs-title class_">NonNullable</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> || value !== <span class="hljs-literal">undefined</span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">joinPath</span>(<span class="hljs-params">params?: &#123;</span><br><span class="hljs-params">  [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>;</span><br><span class="hljs-params">&#125;</span>): <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-keyword">let</span> path = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-keyword">if</span> (!params) &#123;<br>    <span class="hljs-keyword">return</span> path;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(params) === <span class="hljs-string">&quot;[object Object]&quot;</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> params) &#123;<br>      <span class="hljs-keyword">const</span> value = params[key];<br>      path = <span class="hljs-string">`<span class="hljs-subst">$&#123;path&#125;</span><span class="hljs-subst">$&#123;value&#125;</span>/`</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> path;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> path;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurdFactoryService</span> &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> queryParams url ? 查询参数</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _fetch = <span class="hljs-keyword">async</span> &lt;T = <span class="hljs-built_in">never</span>, Q = <span class="hljs-built_in">never</span>, P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    queryParams?: Q,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">get</span>(url, &#123; <span class="hljs-attr">params</span>: queryParams &#125;) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;<br>    )<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@desc</span> 获取携带分页信息的数据</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> queryParams url ? 查询参数</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _fetchSlice = <span class="hljs-keyword">async</span> &lt;<br>    T = <span class="hljs-built_in">never</span>,<br>    Q = <span class="hljs-built_in">never</span>,<br>    P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span><br>  &gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    queryParams?: Q,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">get</span>(url, &#123; <span class="hljs-attr">params</span>: queryParams &#125;) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<br>        <span class="hljs-title class_">CommonResult</span>&lt;<span class="hljs-title class_">PageResult</span>&lt;T[]&gt;&gt;<br>      &gt;<br>    )<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@desc</span> 获取携带分页信息的所有分页数据</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> queryParams url ? 查询参数</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _fetchAllSlice = &lt;T = <span class="hljs-built_in">never</span>, Q = <span class="hljs-built_in">never</span>, P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    queryParams: Q &amp; &#123; limit: <span class="hljs-built_in">number</span>; offset: <span class="hljs-built_in">number</span> &#125;,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> part = (<br>      <span class="hljs-attr">_queryParams</span>: <span class="hljs-keyword">typeof</span> queryParams,<br>      _params?: <span class="hljs-keyword">typeof</span> params<br>    ): <span class="hljs-title class_">Observable</span>&lt;T[]&gt; =&gt; &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">_fetchSlice</span>&lt;T, Q, P&gt;(_queryParams, _params)).<span class="hljs-title function_">pipe</span>(<br>        <span class="hljs-title function_">filter</span>(isNonNull),<br>        <span class="hljs-title function_">mergeMap</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">results</span>: previousResults, count &#125; = res.<span class="hljs-property">data</span>;<br>          <span class="hljs-keyword">const</span> &#123; limit, offset &#125; = _queryParams;<br>          <span class="hljs-keyword">const</span> nextOffset = <span class="hljs-title class_">Number</span>(limit) + <span class="hljs-title class_">Number</span>(offset);<br>          <span class="hljs-keyword">if</span> (nextOffset &lt;= count - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">part</span>(&#123; ...queryParams, <span class="hljs-attr">offset</span>: nextOffset &#125;).<span class="hljs-title function_">pipe</span>(<br>              <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">return</span> [...previousResults, ...results];<br>              &#125;)<br>            );<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(previousResults);<br>          &#125;<br>        &#125;)<br>      );<br>    &#125;;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">part</span>(queryParams, params);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _post = <span class="hljs-keyword">async</span> &lt;T = <span class="hljs-built_in">never</span>, B = <span class="hljs-built_in">never</span>, P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    body?: B,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">post</span>(url, body) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _postForm = <span class="hljs-keyword">async</span> &lt;<br>    T = <span class="hljs-built_in">never</span>,<br>    B = <span class="hljs-built_in">never</span>,<br>    P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span><br>  &gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    body?: B,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">postForm</span>(url, body) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _patch = <span class="hljs-keyword">async</span> &lt;T = <span class="hljs-built_in">never</span>, B = <span class="hljs-built_in">never</span>, P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    body?: B,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">patch</span>(url, body) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _put = <span class="hljs-keyword">async</span> &lt;T = <span class="hljs-built_in">never</span>, B = <span class="hljs-built_in">never</span>, P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    body?: B,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">put</span>(url, body) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _delete = <span class="hljs-keyword">async</span> &lt;T = <span class="hljs-built_in">never</span>, P <span class="hljs-keyword">extends</span> joinPathParamsType = <span class="hljs-built_in">never</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">delete</span>(url) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;)<br>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;)<br>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">handleError</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;);<br>  &#125;;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> http: httpClient, <span class="hljs-keyword">private</span> baseUrl: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span></span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">CurdFactoryService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/curd-factory&#x27;</span>;<br><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/libraries/request&#x27;</span>;<br><br><span class="hljs-keyword">const</span> host = <span class="hljs-string">&quot;https://api.tedding.dev&quot;</span>;<br><span class="hljs-keyword">const</span> api = <span class="hljs-string">&quot;/api/get-xxx&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">AAA</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CurdFactoryService</span>(http, <span class="hljs-string">`<span class="hljs-subst">$&#123;host&#125;</span><span class="hljs-subst">$&#123;api&#125;</span>`</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchAAA</span> = (<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt; &#123;<br>  <span class="hljs-variable constant_">AAA</span>.<span class="hljs-property">_fetch</span>&lt;<span class="hljs-built_in">any</span>, <span class="hljs-keyword">typeof</span> params&gt;(params);<br>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">postAAA</span> = (<span class="hljs-params">body</span>) =&gt; &#123;<br>  <span class="hljs-variable constant_">AAA</span>.<span class="hljs-title function_">_post</span>(body);<br>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">postFormAAA</span> = (<span class="hljs-params">body</span>) =&gt; &#123;<br>  <span class="hljs-variable constant_">AAA</span>.<span class="hljs-title function_">_postForm</span>(body);<br>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchSliceAAA</span> = (<span class="hljs-params">params</span>) =&gt; &#123;<br>  <span class="hljs-variable constant_">AAA</span>.<span class="hljs-title function_">_fetchSlice</span>(params);<br>&#125;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>RxJs</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RxJs Set Interval</title>
    <link href="/2023/05/30/1886c590790.html"/>
    <url>/2023/05/30/1886c590790.html</url>
    
    <content type="html"><![CDATA[RxJs Set Interval<span id="more"></span><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<br>  concat,<br>  map,<br>  interval,<br>  take,<br>  takeUntil,<br>  exhaustMap,<br>  catchError,<br>  <span class="hljs-keyword">of</span>,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxjs&quot;</span>;<br><br><span class="hljs-keyword">const</span> stop$ = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Subject</span>&lt;<span class="hljs-built_in">string</span>&gt;();<br><br><span class="hljs-title function_">concat</span>(<br>  <span class="hljs-title function_">interval</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">takeUntil</span>(stop$), <span class="hljs-title function_">take</span>(<span class="hljs-number">1</span>)),<br>  <span class="hljs-title function_">interval</span>(<span class="hljs-number">1000</span> * <span class="hljs-number">3</span>).<span class="hljs-title function_">pipe</span>(<br>    <span class="hljs-title function_">takeUntil</span>(stop$),<br>    <span class="hljs-title function_">take</span>(<span class="hljs-number">1</span>),<br>    <span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;<br>    &#125;)<br>  ),<br>  <span class="hljs-title function_">interval</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">pipe</span>(<br>    <span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;)<br>  )<br>)<br>  .<span class="hljs-title function_">pipe</span>(<br>    <span class="hljs-title function_">takeUntil</span>(stop$),<br>    <span class="hljs-title function_">exhaustMap</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>();<br>    &#125;),<br>    <span class="hljs-title function_">catchError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(<span class="hljs-literal">null</span>);<br>    &#125;)<br>  )<br>  .<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// code</span><br>  &#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>RxJs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gboard Shuangpin Theme</title>
    <link href="/2023/05/30/1886a7791a8.html"/>
    <url>/2023/05/30/1886a7791a8.html</url>
    
    <content type="html"><![CDATA[Gboard Shuangpin Theme<h2 id="Gboard-双拼主题-附带帮助键位提示"><a href="#Gboard-双拼主题-附带帮助键位提示" class="headerlink" title="Gboard 双拼主题 附带帮助键位提示"></a>Gboard 双拼主题 附带帮助键位提示</h2><span id="more"></span><h3 id="智能ABC"><a href="#智能ABC" class="headerlink" title="智能ABC"></a>智能ABC</h3><p><img src="/assets/img/gboard/gboard-intelligent-abc.png" srcset="/img/loading.gif" lazyload alt="智能ABC"></p><h3 id="拼音加加"><a href="#拼音加加" class="headerlink" title="拼音加加"></a>拼音加加</h3><p><img src="/assets/img/gboard/gboard-pinyin-plusplus.png" srcset="/img/loading.gif" lazyload alt="拼音加加"></p><h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><h4 id="智能ABC-1"><a href="#智能ABC-1" class="headerlink" title="智能ABC"></a>智能ABC</h4><p><img src="/assets/img/gboard/preview-gboard-intelligent-abc.png" srcset="/img/loading.gif" lazyload alt="智能ABC"></p><h4 id="拼音加加-1"><a href="#拼音加加-1" class="headerlink" title="拼音加加"></a>拼音加加</h4><p><img src="/assets/img/gboard/preview-gboard-pinyin-plusplus.png" srcset="/img/loading.gif" lazyload alt="拼音加加"></p>]]></content>
    
    
    <categories>
      
      <category>Smart Phone</category>
      
      <category>iOS</category>
      
      <category>iPhone</category>
      
      <category>Gboard</category>
      
      <category>input method</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Smart Phone</tag>
      
      <tag>iOS</tag>
      
      <tag>iPhone</tag>
      
      <tag>Gboard</tag>
      
      <tag>input method</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux 笔记</title>
    <link href="/2023/03/21/187037b25d8.html"/>
    <url>/2023/03/21/187037b25d8.html</url>
    
    <content type="html"><![CDATA[Linux 笔记<span id="more"></span><h3 id="microsoft-edge-通过命令行配置代理"><a href="#microsoft-edge-通过命令行配置代理" class="headerlink" title="microsoft-edge 通过命令行配置代理"></a>microsoft-edge 通过命令行配置代理</h3><p><a href="'https://learn.microsoft.com/zh-cn/deployedge/edge-learnmore-cmdline-options-proxy-settings'">microsoft 文档</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">microsoft-edge --proxy-server=<span class="hljs-string">&quot;socks5://ip:port&quot;</span><br>microsoft-edge --proxy-server=<span class="hljs-string">&quot;http://ip:port&quot;</span><br></code></pre></td></tr></table></figure><h3 id="zypper-命令技巧"><a href="#zypper-命令技巧" class="headerlink" title="zypper 命令技巧"></a>zypper 命令技巧</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">zypper <span class="hljs-built_in">rm</span> -u package-name // 卸载软件包的同时删除相关联的包<br></code></pre></td></tr></table></figure><h3 id="bash-配置-sudo-可以使用当前用户环境变量"><a href="#bash-配置-sudo-可以使用当前用户环境变量" class="headerlink" title="bash 配置 sudo 可以使用当前用户环境变量"></a>bash 配置 sudo 可以使用当前用户环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">alias</span> sudo=<span class="hljs-string">&#x27;sudo &#x27;</span><br>// bash manpage 有详细解释<br></code></pre></td></tr></table></figure><h3 id="linux-通过-firefox-查看-manpage-文档"><a href="#linux-通过-firefox-查看-manpage-文档" class="headerlink" title="linux 通过 firefox 查看 manpage 文档"></a>linux 通过 firefox 查看 manpage 文档</h3><p>在地址栏键入 <code>man:command</code> 就可以查看对应命令的文档，<br><code>kde</code> 环境能够打开 <code>kde help center</code>，其他 <code>DE</code> 未测试。</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux 脚本片段</title>
    <link href="/2023/03/21/187035ffcb8.html"/>
    <url>/2023/03/21/187035ffcb8.html</url>
    
    <content type="html"><![CDATA[Linux 脚本片段<span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ -f /usr/bin/pipewire-pulse ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;success&#x27;</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Angular CURD Abstract Class</title>
    <link href="/2023/03/15/186e2f0a090.html"/>
    <url>/2023/03/15/186e2f0a090.html</url>
    
    <content type="html"><![CDATA[Angular CURD Abstract Class<p>为<code>RESTful Api</code> 一次性生成所有的可能的 <code>Http Action</code>，简化<code>coding</code> 时间</p><span id="more"></span><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; catchError, map, filter, mergeMap &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxjs/operators&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HttpClient</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@angular/common/http&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-keyword">of</span>, <span class="hljs-title class_">Observable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rxjs&quot;</span>;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">CommonResult</span>&lt;T&gt; &#123;<br>  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">data</span>: T;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Result</span>&lt;T&gt; &#123;<br>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">next</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">previous</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">results</span>: T;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> isNonNull&lt;T&gt;(<span class="hljs-attr">value</span>: T): value is <span class="hljs-title class_">NonNullable</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> || value !== <span class="hljs-literal">undefined</span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurdFactoryService</span> &#123;<br>  <span class="hljs-comment">/** 基础接口url */</span><br>  <span class="hljs-keyword">abstract</span> <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">joinPath</span>(params?: &#123;<br>    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>;<br>  &#125;): <span class="hljs-built_in">string</span> &#123;<br>    <span class="hljs-keyword">let</span> path = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span> (!params) &#123;<br>      <span class="hljs-keyword">return</span> path;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(params) === <span class="hljs-string">&quot;[object Object]&quot;</span>) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> params) &#123;<br>        <span class="hljs-keyword">const</span> value = params[key];<br>        path = <span class="hljs-string">`<span class="hljs-subst">$&#123;path&#125;</span><span class="hljs-subst">$&#123;value&#125;</span>/`</span>;<br>      &#125;<br>      <span class="hljs-keyword">return</span> path;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">return</span> path;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> queryParams url ? 查询参数</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _fetch = &lt;T, Q = <span class="hljs-built_in">any</span>, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">queryParams?: Q, params?: P</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;(url, queryParams).<span class="hljs-title function_">pipe</span>(<br>      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">catchError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(<span class="hljs-literal">null</span>);<br>      &#125;)<br>    );<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@desc</span> 获取携带分页信息的数据</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> queryParams url ? 查询参数</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _fetchSlice = &lt;T, Q = <span class="hljs-built_in">any</span>, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    queryParams?: Q,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;<span class="hljs-title class_">Result</span>&lt;T[]&gt;&gt;&gt;(url, queryParams).<span class="hljs-title function_">pipe</span>(<br>      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">catchError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(<span class="hljs-literal">null</span>);<br>      &#125;)<br>    );<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@desc</span> 获取携带分页信息的所有分页数据</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> queryParams url ? 查询参数</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _fetchAllSlice = &lt;T, Q = <span class="hljs-built_in">any</span>, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    queryParams: Q &amp; &#123; limit: <span class="hljs-built_in">number</span>; offset: <span class="hljs-built_in">number</span> &#125;,</span></span><br><span class="hljs-params"><span class="hljs-function">    params?: P</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> part = (<br>      <span class="hljs-attr">_queryParams</span>: <span class="hljs-keyword">typeof</span> queryParams,<br>      _params?: <span class="hljs-keyword">typeof</span> params<br>    ): <span class="hljs-title class_">Observable</span>&lt;T[]&gt; =&gt; &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_fetchSlice</span>&lt;T, Q, P&gt;(_queryParams, _params).<span class="hljs-title function_">pipe</span>(<br>        <span class="hljs-title function_">filter</span>(isNonNull),<br>        <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-property">data</span>),<br>        <span class="hljs-title function_">mergeMap</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">results</span>: previousResults, count &#125; = data;<br>          <span class="hljs-keyword">const</span> &#123; limit, offset &#125; = _queryParams;<br>          <span class="hljs-keyword">const</span> nextOffset = <span class="hljs-title class_">Number</span>(limit) + <span class="hljs-title class_">Number</span>(offset);<br>          <span class="hljs-keyword">if</span> (nextOffset &lt;= count - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">part</span>(&#123; ...queryParams, <span class="hljs-attr">offset</span>: nextOffset &#125;).<span class="hljs-title function_">pipe</span>(<br>              <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">return</span> [...previousResults, ...results];<br>              &#125;)<br>            );<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(previousResults);<br>          &#125;<br>        &#125;)<br>      );<br>    &#125;;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">part</span>(queryParams, params);<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _post = &lt;T, B = <span class="hljs-built_in">any</span>, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">body?: B, params?: P</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">post</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;(url, body, params).<span class="hljs-title function_">pipe</span>(<br>      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">catchError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(<span class="hljs-literal">null</span>);<br>      &#125;)<br>    );<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _patch = &lt;T, B = <span class="hljs-built_in">any</span>, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">body?: B, params?: P</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">patch</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;(url, body).<span class="hljs-title function_">pipe</span>(<br>      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">catchError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(<span class="hljs-literal">null</span>);<br>      &#125;)<br>    );<br>  &#125;;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> body 请求体</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> params url 路径参数 id、code 拼接</span><br><span class="hljs-comment">   */</span><br>  _delete = &lt;T, P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> = <span class="hljs-built_in">any</span>&gt;<span class="hljs-function">(<span class="hljs-params">params?: P</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span><span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.joinPath(params)&#125;</span>`</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">delete</span>&lt;<span class="hljs-title class_">CommonResult</span>&lt;T&gt;&gt;(url).<span class="hljs-title function_">pipe</span>(<br>      <span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (res) &#123;<br>          <span class="hljs-keyword">return</span> res;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">catchError</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">of</span>(<span class="hljs-literal">null</span>);<br>      &#125;)<br>    );<br>  &#125;;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> http: HttpClient</span>) &#123;&#125;<br><br></code></pre></td></tr></table></figure><h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Injectable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@angular/core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">CurdFactoryService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HttpClient</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@angular/common/http&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-variable constant_">APIS</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@configure&quot;</span>;<br><br><span class="hljs-meta">@Injectable</span>(&#123;<br>  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&quot;root&quot;</span>,<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoctorAppConfigService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CurdFactoryService</span> &#123;<br>  <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">http: _HttpClient</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(http);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = <span class="hljs-variable constant_">APIS</span>.<span class="hljs-property">doctorPromotion</span>;<br>  &#125;<br>&#125;<br><span class="hljs-comment">/** 也可以在此扩展特有的方法 **/</span><br>funcA = <span class="hljs-function">() =&gt;</span> &#123;&#125;;<br>funcB = <span class="hljs-function">() =&gt;</span> &#123;&#125;;<br>funcC = <span class="hljs-function">() =&gt;</span> &#123;&#125;;<br></code></pre></td></tr></table></figure><h3 id="还可以这样用"><a href="#还可以这样用" class="headerlink" title="还可以这样用"></a>还可以这样用</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Injectable</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@angular/core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">CurdFactoryService</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@core&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">HttpClient</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@angular/common/http&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-variable constant_">APIS</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@configure&quot;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AAA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CurdFactoryService</span> &#123;<br>  <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">http: _HttpClient</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(http);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = <span class="hljs-variable constant_">APIS</span>.<span class="hljs-property">AAA</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CurdFactoryService</span> &#123;<br>  <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">http: _HttpClient</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(http);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = <span class="hljs-variable constant_">APIS</span>.<span class="hljs-property">BBB</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CCC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CurdFactoryService</span> &#123;<br>  <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">http: _HttpClient</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(http);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = <span class="hljs-variable constant_">APIS</span>.<span class="hljs-property">CCC</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DDD</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CurdFactoryService</span> &#123;<br>  <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">http: _HttpClient</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(http);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = <span class="hljs-variable constant_">APIS</span>.<span class="hljs-property">DDD</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-meta">@Injectable</span>(&#123;<br>  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&quot;root&quot;</span>,<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnionService</span> &#123;<br>  <span class="hljs-comment">/** API 1 */</span><br>  <span class="hljs-title class_">AAAService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">AAA</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>);<br>  <span class="hljs-comment">/** API 2 */</span><br>  <span class="hljs-title class_">BBBService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">BBB</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>);<br>  <span class="hljs-comment">/** API 3 */</span><br>  <span class="hljs-title class_">CCCService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">CCC</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>);<br>  <span class="hljs-comment">/** API 4 */</span><br>  <span class="hljs-title class_">DDDService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">DDD</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>);<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> http: _HttpClient</span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>Angular</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>Angular</tag>
      
      <tag>RxJs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>将数组值相同的索引分为一组 [Group array index by value]</title>
    <link href="/2023/03/14/186deb01498.html"/>
    <url>/2023/03/14/186deb01498.html</url>
    
    <content type="html"><![CDATA[<h3 id=""><a href="#" class="headerlink" title=""></a>将数组值相同的索引分为一组 [Group array index by value]</h3><span id="more"></span><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[<span class="hljs-string">&quot;aa&quot;</span>, <span class="hljs-string">&quot;er&quot;</span>, <span class="hljs-string">&quot;ewr&quot;</span>, <span class="hljs-string">&quot;er&quot;</span>, <span class="hljs-string">&quot;as&quot;</span>, <span class="hljs-string">&quot;asfad&quot;</span>, <span class="hljs-string">&quot;asfad&quot;</span>, <span class="hljs-string">&quot;vvv&quot;</span>, <span class="hljs-string">&quot;aa&quot;</span>].<span class="hljs-title function_">reduce</span>(<br>  <span class="hljs-function">(<span class="hljs-params">accumulator, seed, index</span>) =&gt;</span> &#123;<br>    accumulator[seed] = (accumulator[seed] || []).<span class="hljs-title function_">concat</span>(index);<br>    <span class="hljs-keyword">return</span> accumulator;<br>  &#125;,<br>  &#123;&#125;<br>);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>openSUSE 使用平铺窗口管理工具 bspwm 替换 KWin</title>
    <link href="/2022/08/11/1828ba35f20.html"/>
    <url>/2022/08/11/1828ba35f20.html</url>
    
    <content type="html"><![CDATA[<h2 id="bspwm-基础安装配置"><a href="#bspwm-基础安装配置" class="headerlink" title="bspwm 基础安装配置"></a>bspwm 基础安装配置</h2><span id="more"></span><p>1、 安装 <code>bspwm</code> 、<code>sxhkd</code><br>2、 复制 配置文件到 ~&#x2F;.config<br>3、 编辑 bspwm desktop session 文件 （&#x2F;usr&#x2F;share&#x2F;xsessions&#x2F;bspwm）配置,修改 <code>Exec=bspwm</code> 到 <code>Exec=env KDEWM=bspwm</code><br>4、 禁用 KDE 窗口管理 systemd 启动方式，<code>kwriteconfig5 --file startkderc --group General --key systemdBoot false</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$:~&gt; <span class="hljs-built_in">mkdir</span> ~/.config/bspwm<br>$:~&gt; <span class="hljs-built_in">mkdir</span> ~/.config/sxhkd<br>$:~&gt; <span class="hljs-built_in">cp</span> /usr/share/doc/packages/bspwm/examples/bspwmrc ~/.config/bspwm/bspwmrc<br>$:~&gt; <span class="hljs-built_in">cp</span> /usr/share/doc/packages/bspwm/examples/sxhkdrc ~/.config/sxhkd/sxhkdrc<br></code></pre></td></tr></table></figure><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul><li>bspwm <a href="https://wiki.archlinux.org/title/Bspwm_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">arch wiki</a></li><li>KDE <a href="https://wiki.archlinux.org/title/KDE_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">arch wiki</a></li><li>KDE UserBase Wiki <a href="https://userbase.kde.org/Tutorials/Using_Other_Window_Managers_with_Plasma/zh-cn">Using_Other_Window_Managers_with_Plasma</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>openSUSE</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>openSUSE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Let&#39;s Encrypt</title>
    <link href="/2022/04/04/17ff0fad9f0.html"/>
    <url>/2022/04/04/17ff0fad9f0.html</url>
    
    <content type="html"><![CDATA[<h2 id="使用-docker-签署-Let’s-Encrypt-证书"><a href="#使用-docker-签署-Let’s-Encrypt-证书" class="headerlink" title="使用 docker 签署 Let’s Encrypt 证书"></a>使用 docker 签署 Let’s Encrypt 证书</h2><span id="more"></span><h3 id="docker-certbot-x2F-certbot-command"><a href="#docker-certbot-x2F-certbot-command" class="headerlink" title="docker certbot&#x2F;certbot command"></a>docker certbot&#x2F;certbot command</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo docker run -it --<span class="hljs-built_in">rm</span> --name certbot     <br>                -v <span class="hljs-string">&quot;/etc/letsencrypt:/etc/letsencrypt&quot;</span>             <br>                -v <span class="hljs-string">&quot;/var/lib/letsencrypt:/var/lib/letsencrypt&quot;</span>             <br>                certbot/certbot certonly --manual --preferred-challenges dns<br></code></pre></td></tr></table></figure><p>ps: 90 天有效期，不能自动续签，需要在证书过期前手动再次签署证书。</p><h3 id="certbot-文档"><a href="#certbot-文档" class="headerlink" title="certbot 文档"></a>certbot 文档</h3><ul><li><a href="https://eff-certbot.readthedocs.io/en/stable/intro.html#how-to-run-the-client">安装 certbot client</a>        </li><li><a href="https://eff-certbot.readthedocs.io/en/stable/using.html#standalone">使用 certbot 签署证书</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>docker</tag>
      
      <tag>let&#39;s encrypt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>塞尔达传说:荒野之息 游戏原声</title>
    <link href="/2022/04/03/17feecd72a0.html"/>
    <url>/2022/04/03/17feecd72a0.html</url>
    
    <content type="html"><![CDATA[<h3 id=""><a href="#" class="headerlink" title=""></a>塞尔达传说:荒野之息 游戏原声</h3><span id="more"></span><h3 id="塞尔达传说-荒野之息-OST"><a href="#塞尔达传说-荒野之息-OST" class="headerlink" title="塞尔达传说:荒野之息 OST"></a>塞尔达传说:荒野之息 OST</h3><blockquote><p>链接: <a href="https://pan.baidu.com/s/1KB37IG7Y3S7fhQvb0PIVag?pwd=hjak">https://pan.baidu.com/s/1KB37IG7Y3S7fhQvb0PIVag?pwd=hjak</a><br>提取码: hjak 复制这段内容后打开百度网盘手机App，操作更方便哦</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Music</category>
      
      <category>Game</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Music</tag>
      
      <tag>Game</tag>
      
      <tag>The legend of zelda</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RPM Packages Backup</title>
    <link href="/2022/04/03/17feb138780.html"/>
    <url>/2022/04/03/17feb138780.html</url>
    
    <content type="html"><![CDATA[RPM Packages Backup<p>openSUSE 首次启动 快速初始化</p><span id="more"></span><ul><li>kSysGuard</li><li>Kdevelop</li><li>Kompare</li><li>WPS</li><li>plan</li><li>kfind</li><li>postman</li><li>kde partition manager</li><li>kde connect</li><li>suse studio imagewriter</li><li>latte</li><li>yakuake</li><li>dbeaver-ce</li><li>yast2-fonts</li><li>yast2-users</li><li>screenkey &#x2F;&#x2F; 显示按键</li><li>inkscape &#x2F;&#x2F; 适量图形编辑</li><li>zip</li><li>7zip</li><li>packman</li><li>packman-essentials</li><li>vscode</li><li>chrome</li><li>edge</li></ul><h3 id="可选"><a href="#可选" class="headerlink" title="可选"></a>可选</h3><ul><li>woeusb</li></ul><h3 id="当前已经安装"><a href="#当前已经安装" class="headerlink" title="当前已经安装"></a>当前已经安装</h3><p>latte-dock<br>partitionmanager<br>ksysguard5<br>kfind<br>kdeconnect-kde<br>git-gui</p><h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc<br>sudo sh -c <span class="hljs-string">&#x27;echo -e &quot;[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\ntype=rpm-md\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc&quot; &gt; /etc/zypp/repos.d/vscode.repo&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo rpm --import https://dl.google.com/linux/linux_signing_key.pub<br>sudo zypper ar http://dl.google.com/linux/chrome/rpm/stable/x86_64 google-chrome<br></code></pre></td></tr></table></figure><h3 id="edge"><a href="#edge" class="headerlink" title="edge"></a>edge</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc<br>sudo zypper ar https://packages.microsoft.com/yumrepos/edge microsoft-edge<br></code></pre></td></tr></table></figure><h3 id="packman"><a href="#packman" class="headerlink" title="packman"></a>packman</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo zypper ar -cfp 90 https://ftp.gwdg.de/pub/linux/misc/packman/suse/openSUSE_Tumbleweed/ packman<br>sudo zypper dup --from packman --allow-vendor-change<br></code></pre></td></tr></table></figure><h3 id="vscode-KDE-x2F-Plasma-全局菜单失效"><a href="#vscode-KDE-x2F-Plasma-全局菜单失效" class="headerlink" title="vscode KDE&#x2F;Plasma 全局菜单失效"></a>vscode KDE&#x2F;Plasma 全局菜单失效</h3><p>需要安装 libdbusmenu-glib4 包</p><h3 id="vscode-登录同步账户"><a href="#vscode-登录同步账户" class="headerlink" title="vscode 登录同步账户"></a>vscode 登录同步账户</h3><p>gnome-keyring</p><h3 id="Wine"><a href="#Wine" class="headerlink" title="Wine"></a>Wine</h3><ul><li>appmenu-gtk2-module</li><li>appmenu-gtk3-module</li><li>winetricks riched20  修复输入框聚焦问题</li><li>export WINEPREFIX&#x3D;&#x2F;path&#x2F;to&#x2F;wineprefix</li></ul><h3 id="翻译"><a href="#翻译" class="headerlink" title="翻译"></a>翻译</h3><p>translate-shell</p><h3 id="解码"><a href="#解码" class="headerlink" title="解码"></a>解码</h3><ul><li><a href="https://en.opensuse.org/Additional_package_repositories">https://en.opensuse.org/Additional_package_repositories</a></li><li>vlc-codecs</li><li>ffmpeg-4</li></ul><h3 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h3><p>emacs</p><h3 id="browser"><a href="#browser" class="headerlink" title="browser"></a>browser</h3><ul><li>epiphany (webkit2gtk safari 同款内核)</li></ul><h3 id="ios-设备管理"><a href="#ios-设备管理" class="headerlink" title="ios 设备管理"></a>ios 设备管理</h3><ul><li>libimobiledevice6 </li><li>usbmuxd </li><li>ifuse<br><code>https://libimobiledevice.org/#downloads</code></li></ul><h3 id="Clang-LLVM"><a href="#Clang-LLVM" class="headerlink" title="Clang LLVM"></a>Clang LLVM</h3><ul><li>clang </li><li>llvm</li></ul><h3 id="创建-Classic-Macos-9"><a href="#创建-Classic-Macos-9" class="headerlink" title="创建 Classic Macos 9"></a>创建 Classic Macos 9</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">qemu-system-ppc -hda ../mac_os9_zh_CN.img  -M mac99 -m 256 -prom-env <span class="hljs-string">&quot;boot-args=-v&quot;</span> -g 1024x768x32<br></code></pre></td></tr></table></figure><h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><ul><li>wqy-bitmap-fonts</li><li>wqy-microhei-fonts</li></ul><h3 id="Okular-插件"><a href="#Okular-插件" class="headerlink" title="Okular 插件"></a>Okular 插件</h3><ul><li>calligra-extras-okular</li><li>okular-spectre</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">zypper <span class="hljs-keyword">in</span> latte-dock partitionmanager ksysguard5 kfind kdeconnect-kde git-gui libdbusmenu-glib4 appmenu-gtk2-module appmenu-gtk3-module translate-shell epiphany yakuake yast2-fonts yast2-users screenkey zip 7zip ksysguard wine -y<br></code></pre></td></tr></table></figure><h2 id="广告屏蔽"><a href="#广告屏蔽" class="headerlink" title="广告屏蔽"></a>广告屏蔽</h2><p>AdNauseam</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>“被蚊子咬了个包”用英文怎么说？</title>
    <link href="/2021/05/29/179b410da90.html"/>
    <url>/2021/05/29/179b410da90.html</url>
    
    <content type="html"><![CDATA[<p>“被蚊子咬了个包”用英文怎么说？ </p><span id="more"></span><ul><li><p><code>I think I’ve been bitten by a mosquito. It’s really itchy.</code><br>我好像被蚊子咬了，痒痒死了。</p></li><li><p><code>I must have 10 mozzie bites on my arm.</code><br>我胳膊上有差不多十个蚊子咬的包<br>  *<code>mozzie</code> 是 <code>mosquito</code> 的简称<br>  *<code>mozzie</code> <code>bite(s)</code>蚊子咬的包</p></li><li><p><code>I was bitten by so many mosquitos last night.</code><br>我昨天晚上被好多蚊子咬了包</p></li><li><p><code>I’ve got a mosquito bite.</code><br>我被蚊子咬了个包</p></li></ul><blockquote><p>内容原创：Bilibili <a href="https://space.bilibili.com/642892779/">帅山姆先生</a><br>视频地址: <a href="https://www.bilibili.com/video/BV1XC4y1b7k4">https://www.bilibili.com/video/BV1XC4y1b7k4</a></p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>How-to-say-suibian-in-english</title>
    <link href="/2021/05/28/179af47b1f0.html"/>
    <url>/2021/05/28/179af47b1f0.html</url>
    
    <content type="html"><![CDATA[<p>如何用英语说‘随便’？</p><span id="more"></span><ul><li><code>It’s up to you</code> 随便&#x2F;都行&#x2F;听你的</li><li><code>It’s your call</code> 随便&#x2F;都行&#x2F;你决定吧</li><li><code>You decide</code> 随便&#x2F;都行&#x2F;你决定吧</li><li><code>Whatever you want</code> 都行&#x2F;看你</li><li><code>I don’t mind, you choose</code> 我不介意,你选吧</li><li><code>It’s your choice</code> 听你的</li><li><code>Whatever flows your boat</code> 随便,听你的</li></ul><blockquote><p>内容原创：Bilibili <a href="https://space.bilibili.com/642892779/">帅山姆先生</a><br>视频地址: <a href="https://www.bilibili.com/video/BV1Cf4y1X7NG">https://www.bilibili.com/video/BV1Cf4y1X7NG</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>帅山姆先生</category>
      
      <category>英文口语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>帅山姆先生</tag>
      
      <tag>英文口语</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mac 微信多开</title>
    <link href="/2020/06/08/17291c8d2c8.html"/>
    <url>/2020/06/08/17291c8d2c8.html</url>
    
    <content type="html"><![CDATA[<p>macOS 微信多开</p><span id="more"></span><ul><li>打开终端 <code>Terminal</code></li><li>输入 <code>open -n /Applications/WeChat.app/Contents/MacOS/WeChat</code></li><li><code>ctrl + z</code> 将应用挂起</li><li><code>bg</code> 将挂起的应用放入后台</li><li><code>exit</code> 退出终端</li></ul>]]></content>
    
    
    <categories>
      
      <category>macOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>macOS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Interview-QS-Code-1</title>
    <link href="/2020/04/23/171a34b99c8.html"/>
    <url>/2020/04/23/171a34b99c8.html</url>
    
    <content type="html"><![CDATA[<p>前端面试 笔试题 代码阅读 1</p><span id="more"></span><h1 id="Q-下面这段代码输出什么？"><a href="#Q-下面这段代码输出什么？" class="headerlink" title="Q:下面这段代码输出什么？"></a>Q:下面这段代码输出什么？</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">var</span> obj = &#123;<br>  <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-attr">func1</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>;<br>  &#125;,<br>  <span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">var</span> obj2 = &#123;<br>  <span class="hljs-attr">a</span>: <span class="hljs-number">3</span><br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">func1</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">func2</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">func2</span>.<span class="hljs-title function_">apply</span>(obj2))<br><span class="hljs-keyword">var</span> newFunc = obj.<span class="hljs-property">func2</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">newFunc</span>())<br></code></pre></td></tr></table></figure><p>A: <code>1,2,3,1</code></p><h1 id="Q-下面这段代码输出什么？-1"><a href="#Q-下面这段代码输出什么？-1" class="headerlink" title="Q:下面这段代码输出什么？"></a>Q:下面这段代码输出什么？</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i)<br>  &#125;, <span class="hljs-number">1000</span> * i)<br>&#125;<br></code></pre></td></tr></table></figure><p>A: <code>5,5,5,5,5</code> 看起来像每隔一秒输出一次（实际统计不到5s）</p><h1 id="Q-下面这段代码输出什么？-2"><a href="#Q-下面这段代码输出什么？-2" class="headerlink" title="Q:下面这段代码输出什么？"></a>Q:下面这段代码输出什么？</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i)<br>  &#125;, <span class="hljs-number">1000</span> * i)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:<code>0,1,2,3,4</code> 看起来像每隔一秒输出一次（实际统计不到5s）</p><h1 id="Q-下面这段代码输出什么？-3"><a href="#Q-下面这段代码输出什么？-3" class="headerlink" title="Q:下面这段代码输出什么？"></a>Q:下面这段代码输出什么？</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>  (<span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i)<br>    &#125;, <span class="hljs-number">1000</span> * i)<br>  &#125;)(i)<br>&#125;<br></code></pre></td></tr></table></figure><p>A:<code>0,1,2,3,4</code><br>因为闭包，所以输出0、1、2、3、4，看起来像每隔一秒输出一次（实际统计不到5s）</p><h1 id="Q-下面这段代码输出什么？-4"><a href="#Q-下面这段代码输出什么？-4" class="headerlink" title="Q:下面这段代码输出什么？"></a>Q:下面这段代码输出什么？</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> bb = <span class="hljs-number">1</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">aa</span>(<span class="hljs-params">bb</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bb)<br>  bb = <span class="hljs-number">2</span>;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bb)<br>&#125;<br><span class="hljs-title function_">aa</span>(bb)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bb)<br></code></pre></td></tr></table></figure><p>A:<code>1,2,1</code> 函数有自己的作用域   </p>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>面试</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>面试</tag>
      
      <tag>代码阅读</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Interview QS 1</title>
    <link href="/2020/04/18/17189a23810.html"/>
    <url>/2020/04/18/17189a23810.html</url>
    
    <content type="html"><![CDATA[<p>前端面试 笔试题 1</p><span id="more"></span><h1 id="Cookie、sessionStorage、localStorage-区别"><a href="#Cookie、sessionStorage、localStorage-区别" class="headerlink" title="Cookie、sessionStorage、localStorage 区别"></a>Cookie、sessionStorage、localStorage 区别</h1><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p><code>HTTP Cookie（也叫Web Cookie或浏览器 Cookie）是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。Cookie 使基于无状态的HTTP协议记录稳定的状态信息成为了可能。</code></p><ul><li>会话期 Cookie<blockquote><p>会话期 Cookie 是最简单的 Cookie：浏览器关闭之后它会被自动删除，也就是说它仅在会话期内有效。会话期 Cookie 不需要指定过期时间（Expires）或者有效期（Max-Age）。需要注意的是，有些浏览器提供了会话恢复功能，这种情况下即使关闭了浏览器，会话期 Cookie 也会被保留下来，就好像浏览器从来没有关闭一样。</p></blockquote></li><li>持久性 Cookie<blockquote><p>和关闭浏览器便失效的会话期 Cookie 不同，持久性 Cookie 可以指定一个特定的过期时间（Expires）或有效期（Max-Age）。</p></blockquote></li></ul><h2 id="Web-Storage"><a href="#Web-Storage" class="headerlink" title="Web Storage"></a>Web Storage</h2><ul><li>sessionStorage    <blockquote><p>为每一个给定的源（given origin）维持一个独立的存储区域，该存储区域在页面会话期间可用（即只要浏览器处于打开状态，包括页面重新加载和恢复）。</p></blockquote></li><li>localStorage  <blockquote><p>同样的功能，但是在浏览器关闭，然后重新打开后数据仍然存在。</p></blockquote></li></ul><h1 id="Vue-的生命周期分为几个阶段，状态如何"><a href="#Vue-的生命周期分为几个阶段，状态如何" class="headerlink" title="Vue 的生命周期分为几个阶段，状态如何"></a>Vue 的生命周期分为几个阶段，状态如何</h1><p><img src="https://cn.vuejs.org/images/lifecycle.png" srcset="/img/loading.gif" lazyload alt="生命周期图"></p><center>图片引用自官网</center><h1 id="Vue-组件之间的传值通信"><a href="#Vue-组件之间的传值通信" class="headerlink" title="Vue 组件之间的传值通信"></a>Vue 组件之间的传值通信</h1><h1 id="添加、移动、复制、创建、查找节点"><a href="#添加、移动、复制、创建、查找节点" class="headerlink" title="添加、移动、复制、创建、查找节点"></a>添加、移动、复制、创建、查找节点</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javaScript"><span class="hljs-title function_">createDocumentFragment</span>() <span class="hljs-comment">//创建一个 DOM 片段  </span><br><span class="hljs-title function_">createElement</span>() <span class="hljs-comment">//创建一个具体的元素  </span><br><span class="hljs-title function_">createTextNode</span>() <span class="hljs-comment">//创建一个文本节点</span><br><br><span class="hljs-title function_">appendChild</span>() <span class="hljs-comment">//添加</span><br><span class="hljs-title function_">remove</span>() <span class="hljs-comment">//移除</span><br><span class="hljs-title function_">replaceChild</span>() <span class="hljs-comment">//替换</span><br><span class="hljs-title function_">insertBefore</span>() <span class="hljs-comment">//插入</span><br><br><span class="hljs-title function_">getElementsByTagName</span>()<span class="hljs-comment">//通过标签名</span><br><span class="hljs-title function_">getElementsByClassName</span>()<span class="hljs-comment">//通过元素的name属性</span><br><span class="hljs-title function_">getElementById</span>()<span class="hljs-comment">//通过ID</span><br><span class="hljs-title function_">getAttribute</span>()<br></code></pre></td></tr></table></figure><h1 id="闭包和闭包的用途、优缺点"><a href="#闭包和闭包的用途、优缺点" class="headerlink" title="闭包和闭包的用途、优缺点"></a>闭包和闭包的用途、优缺点</h1><h1 id="http状态码"><a href="#http状态码" class="headerlink" title="http状态码"></a>http状态码</h1><p>200<br>301<br>302<br>404<br>500 </p><h1 id="web应用性能优化"><a href="#web应用性能优化" class="headerlink" title="web应用性能优化"></a>web应用性能优化</h1><blockquote><p>1、减少请求次数<br>2、降低请求耗时</p></blockquote><ul><li>CDN</li><li>压缩传输，即GZIP&#x2F;Deflate</li><li>前端模块化</li><li>使用缓存</li><li>使用本地存储</li><li>负载均衡：Nginx&#x2F;SLB</li></ul><h1 id="DOM-事件流"><a href="#DOM-事件流" class="headerlink" title="DOM 事件流"></a>DOM 事件流</h1><p>“DOM2级事件”规定的事件流包括三个阶段: 事件捕获阶段、处于目标阶段和事件冒泡阶段。首先发生的是事件捕获，为截获事件提供了机会。然后是实际的目标接收到事件。最后一个阶段是冒泡阶 段，可以在这个阶段对事件做出响应。  </p><p>在 DOM 事件流中，实际的目标在捕获阶段不会接收到事件。下一个阶段是“处于目标”阶段，于是事件在目标上发生，并在事件处理中被看成冒泡阶段的一部分。然后，冒泡阶段发生，事件又传播回文档。</p><h1 id="实现Flat"><a href="#实现Flat" class="headerlink" title="实现Flat"></a>实现Flat</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat">MDN文档</a><br><code>原生flat</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> newArray = arr.<span class="hljs-title function_">flat</span>([depth])<br><span class="hljs-keyword">var</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]];<br>arr1.<span class="hljs-title function_">flat</span>(); <br><span class="hljs-comment">// [1, 2, 3, 4]</span><br><span class="hljs-keyword">var</span> arr2 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]];<br>arr2.<span class="hljs-title function_">flat</span>();<br><span class="hljs-comment">// [1, 2, 3, 4, [5, 6]]</span><br><span class="hljs-keyword">var</span> arr3 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]];<br>arr3.<span class="hljs-title function_">flat</span>(<span class="hljs-number">2</span>);<br><span class="hljs-comment">// [1, 2, 3, 4, 5, 6]</span><br><br><span class="hljs-comment">//使用 Infinity，可展开任意深度的嵌套数组</span><br><span class="hljs-keyword">var</span> arr4 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>]]]]];<br>arr4.<span class="hljs-title function_">flat</span>(<span class="hljs-title class_">Infinity</span>);<br><span class="hljs-comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span><br></code></pre></td></tr></table></figure><p><code>替代方案</code></p><blockquote><p>使用 reduce 与 concat</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]];<br><br><span class="hljs-comment">// 展开一层数组</span><br>arr.<span class="hljs-title function_">flat</span>();<br><span class="hljs-comment">// 等效于</span><br>arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, val</span>) =&gt;</span> acc.<span class="hljs-title function_">concat</span>(val), []);<br><span class="hljs-comment">// [1, 2, 3, 4]</span><br><br><span class="hljs-comment">// 使用扩展运算符 ...</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">flattened</span> = arr =&gt; [].<span class="hljs-title function_">concat</span>(...arr);<br></code></pre></td></tr></table></figure><blockquote><p>reduce + concat + isArray + recursivity</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 使用 reduce、concat 和递归展开无限多层嵌套的数组</span><br><span class="hljs-keyword">var</span> arr1 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>, [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]]];<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">flatDeep</span>(<span class="hljs-params">arr, d = <span class="hljs-number">1</span></span>) &#123;<br>   <span class="hljs-keyword">return</span> d &gt; <span class="hljs-number">0</span> ? arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, val</span>) =&gt;</span> acc.<span class="hljs-title function_">concat</span>(<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val) ? <span class="hljs-title function_">flatDeep</span>(val, d - <span class="hljs-number">1</span>) : val), [])<br>                : arr.<span class="hljs-title function_">slice</span>();<br>&#125;;<br><br><span class="hljs-title function_">flatDeep</span>(arr1, <span class="hljs-title class_">Infinity</span>);<br><span class="hljs-comment">// [1, 2, 3, 1, 2, 3, 4, 2, 3, 4]</span><br></code></pre></td></tr></table></figure><blockquote><p>forEach+isArray+push+recursivity</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// forEach 遍历数组会自动跳过空元素</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">eachFlat</span> = (<span class="hljs-params">arr = [], depth = <span class="hljs-number">1</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> result = []; <span class="hljs-comment">// 缓存递归结果</span><br>  <span class="hljs-comment">// 开始递归</span><br>  (<span class="hljs-keyword">function</span> <span class="hljs-title function_">flat</span>(<span class="hljs-params">arr, depth</span>) &#123;<br>    <span class="hljs-comment">// forEach 会自动去除数组空位</span><br>    arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">// 控制递归深度</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(item) &amp;&amp; depth &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// 递归数组</span><br>        <span class="hljs-title function_">flat</span>(item, depth - <span class="hljs-number">1</span>)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 缓存元素</span><br>        result.<span class="hljs-title function_">push</span>(item)<br>      &#125;<br>    &#125;)<br>  &#125;)(arr, depth)<br>  <span class="hljs-comment">// 返回递归结果</span><br>  <span class="hljs-keyword">return</span> result;<br>&#125; <br><br><span class="hljs-comment">// for of 循环不能去除数组空位，需要手动去除</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">forFlat</span> = (<span class="hljs-params">arr = [], depth = <span class="hljs-number">1</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> result = [];<br>  (<span class="hljs-keyword">function</span> <span class="hljs-title function_">flat</span>(<span class="hljs-params">arr, depth</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> arr) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(item) &amp;&amp; depth &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-title function_">flat</span>(item, depth - <span class="hljs-number">1</span>)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 去除空元素，添加非undefined元素</span><br>        item !== <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> &amp;&amp; result.<span class="hljs-title function_">push</span>(item);<br>      &#125;<br>    &#125;<br>  &#125;)(arr, depth)<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="大量插入DOM节点"><a href="#大量插入DOM节点" class="headerlink" title="大量插入DOM节点"></a>大量插入DOM节点</h1><p><code>document.createDocumentFragment</code><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createDocumentFragment">MDN描述</a><br>DocumentFragments 是DOM节点。它们不是主DOM树的一部分。通常的用例是创建文档片段，将元素附加到文档片段，然后将文档片段附加到DOM树。在DOM树中，文档片段被其所有的子元素所代替。</p><p>因为文档片段存在于内存中，并不在DOM树中，所以将子元素插入到文档片段时不会引起页面回流（对元素位置和几何上的计算）。因此，使用文档片段通常会带来更好的性能。</p><h1 id="如何判断是数组"><a href="#如何判断是数组" class="headerlink" title="如何判断是数组"></a>如何判断是数组</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> arr = []<br><span class="hljs-comment">// 通过原型判断</span><br>arr <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span> <span class="hljs-comment">// true</span><br>arr.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> <span class="hljs-comment">// true</span><br>arr.<span class="hljs-property">construct</span> === <span class="hljs-title class_">Array</span> <span class="hljs-comment">//true</span><br><br><span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(arr) === <span class="hljs-string">&#x27;[object Array]&#x27;</span> <span class="hljs-comment">// true</span><br><span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr) <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><h1 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h1><p>ECMAScript 中有 5 种简单数据类型(也称为基本数据类型):<br>Undefined、Null、Boolean、Number 和 String。<br>还有 1 种复杂数据类型——Object</p><p>typeof 操作符</p><ul><li>“undefined”——如果这个值未定义;</li><li>“boolean”——如果这个值是布尔值;</li><li>“string”——如果这个值是字符串;</li><li>“number”——如果这个值是数值;</li><li>“object”——如果这个值是对象或 null;</li><li>“function”——如果这个值是函数。</li></ul>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>面试</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>面试</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>bash_profile 备份</title>
    <link href="/2020/03/04/170a601c9e0.html"/>
    <url>/2020/03/04/170a601c9e0.html</url>
    
    <content type="html"><![CDATA[<p><code>bash_profile</code> 常用配置备份</p><span id="more"></span><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#enables colorin the terminal bash shell export</span><br><span class="hljs-built_in">export</span> CLICOLOR=1<br><br><span class="hljs-comment">#setsup thecolor scheme for list export</span><br><span class="hljs-built_in">export</span> LSCOLORS=gxfxcxdxbxegedabagacad<br><br><span class="hljs-comment">#sets up theprompt color (currently a green similar to linux terminal)</span><br><span class="hljs-built_in">export</span> PS1=<span class="hljs-string">&#x27;\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;36m\]\w\[\033[00m\]\$ &#x27;</span><br><span class="hljs-comment">#enables colorfor iTerm</span><br><span class="hljs-built_in">export</span> TERM=xterm-256color<br><br><span class="hljs-built_in">alias</span> grep=<span class="hljs-string">&#x27;grep --color&#x27;</span><br><span class="hljs-built_in">alias</span> la=<span class="hljs-string">&#x27;ls -al&#x27;</span><br><span class="hljs-built_in">alias</span> ll=<span class="hljs-string">&#x27;ls -l&#x27;</span><br><span class="hljs-built_in">alias</span> cls=clear<br><br><span class="hljs-built_in">alias</span> proxyon=<span class="hljs-string">&#x27;export http_proxy=http://127.0.0.1:1087; export https_proxy=http://127.0.0.1:1087;echo proxy is on!&#x27;</span><br><span class="hljs-built_in">alias</span> proxyoff=<span class="hljs-string">&#x27;unset http_proxy; unset https_proxy;echo proxy is off!&#x27;</span><br><br><span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.nvm&quot;</span><br>[ -s <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="hljs-comment"># This loads nvm</span><br>[ -s <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="hljs-comment"># This loads nvm bash_completion</span><br><br><span class="hljs-built_in">export</span> workspace=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/Documents/workspace&quot;</span><br><br><span class="hljs-comment">#shorcuts</span><br><span class="hljs-built_in">alias</span> doc=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Documents&quot;</span><br><span class="hljs-built_in">alias</span> dod=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Downloads&quot;</span><br><span class="hljs-built_in">alias</span> dop=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Desktop&quot;</span><br><span class="hljs-built_in">alias</span> app=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Applications&quot;</span><br><span class="hljs-built_in">alias</span> pic=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Pictures&quot;</span><br><span class="hljs-built_in">alias</span> mov=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Movies&quot;</span><br><span class="hljs-built_in">alias</span> mus=<span class="hljs-string">&quot;cd <span class="hljs-variable">$HOME</span>/Music&quot;</span><br><br><span class="hljs-comment">#workspace</span><br><span class="hljs-built_in">alias</span> ws=<span class="hljs-string">&quot;cd <span class="hljs-variable">$workspace</span>&quot;</span><br><span class="hljs-built_in">alias</span> wsg=<span class="hljs-string">&quot;cd <span class="hljs-variable">$workspace</span>/github&quot;</span><br><br><span class="hljs-comment">#npm</span><br><span class="hljs-built_in">alias</span> ns=<span class="hljs-string">&quot;npm run start&quot;</span><br><span class="hljs-built_in">alias</span> nb=<span class="hljs-string">&quot;npm run build&quot;</span><br><br><span class="hljs-comment">#gits</span><br><br><br><span class="hljs-comment"># mitmproxy</span><br><span class="hljs-comment"># SSLKEYLOGFILE=&quot;$PWD/.mitmproxy/sslkeylogfile.txt&quot; mitmproxy</span><br><br><br><span class="hljs-comment"># hexo </span><br><span class="hljs-built_in">alias</span> hexogs=<span class="hljs-string">&quot;hexo g &amp;&amp; hexo s&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>bash</category>
      
      <category>profile</category>
      
    </categories>
    
    
    <tags>
      
      <tag>backup</tag>
      
      <tag>profile</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>为 React 项目手动配置代理</title>
    <link href="/2018/05/25/16396ab1ad0.html"/>
    <url>/2018/05/25/16396ab1ad0.html</url>
    
    <content type="html"><![CDATA[<p>通过为项目<em>设置代理</em> 解决http请求跨域问题。<br><em>此功能适用于react脚本@ 1 . 0 . 0和更高版本。</em></p><span id="more"></span><p>在 <code>package.json</code>文件中指定如下对象</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">&#123;<br>  <span class="hljs-string">//</span> <span class="hljs-string">...</span><br>  <span class="hljs-string">&quot;proxy&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;/api&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;target&quot;</span>: <span class="hljs-string">&quot;&lt;url&gt;&quot;</span>,<br>      <span class="hljs-string">&quot;ws&quot;</span>: <span class="hljs-literal">true</span><br>      <span class="hljs-string">//</span> <span class="hljs-string">...</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-string">//</span> <span class="hljs-string">...</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>React</category>
      
      <category>Proxy</category>
      
      <category>FE-Dev</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>React</tag>
      
      <tag>Proxy</tag>
      
      <tag>FE-Dev</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>增加 AfterEffect 插件 FLow 的试用时间（理论上永久）</title>
    <link href="/2018/04/11/162b07878a0.html"/>
    <url>/2018/04/11/162b07878a0.html</url>
    
    <content type="html"><![CDATA[<p>！！商业用途请支持正版！！<br>！！有能力请支持开发者！！<br>本文提供一个方法，在Flow插件试用到期之后可以继续试用(理论永久)。原因是 开发者 只是象征性的在插件试用到期之后，进行了隐藏。再次强调，有能力请支持正版<a href="https://aescripts.com/flow/">点击这里</a>。</p><span id="more"></span><h2 id="1、-插件修改"><a href="#1、-插件修改" class="headerlink" title="1、 插件修改"></a>1、 插件修改</h2><ul><li>将flow.zxp更改扩展名为.zip并解压缩</li><li>使用vscode 或者其他编辑器 打开.&#x2F;Flow&#x2F;js&#x2F;flow.js</li><li>查找以下片段<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">g</span>(<span class="hljs-params">A, Q</span>) &#123;<br>  <span class="hljs-keyword">var</span> B = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;iframe&#x27;</span>)<br>  ;(B.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;aesp &#x27;</span> + A),<br>    (B.<span class="hljs-property">src</span> = <span class="hljs-string">&#x27;data:text/html;charset=utf-8,&#x27;</span> + <span class="hljs-built_in">encodeURI</span>(Q))<br>  <span class="hljs-keyword">var</span> I = B.<span class="hljs-property">style</span><br>  ;(I.<span class="hljs-property">position</span> = <span class="hljs-string">&#x27;absolute&#x27;</span>),<br>    (I.<span class="hljs-property">left</span> = <span class="hljs-string">&#x27;0px&#x27;</span>),<br>    (I.<span class="hljs-property">top</span> = <span class="hljs-string">&#x27;0px&#x27;</span>),<br>    (I.<span class="hljs-property">right</span> = <span class="hljs-string">&#x27;0px&#x27;</span>),<br>    (I.<span class="hljs-property">bottom</span> = <span class="hljs-string">&#x27;0px&#x27;</span>),<br>    (I.<span class="hljs-property">width</span> = <span class="hljs-string">&#x27;100%&#x27;</span>),<br>    (I.<span class="hljs-property">height</span> = <span class="hljs-string">&#x27;100%&#x27;</span>),<br>    (I.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&#x27;white&#x27;</span>),<br>    (I.<span class="hljs-property">borderWidth</span> = <span class="hljs-string">&#x27;0px&#x27;</span>),<br>    (I.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>),<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(B)<br>  <span class="hljs-keyword">var</span> i = B.<span class="hljs-property">contentWindow</span><br>  <span class="hljs-keyword">return</span> (<br>    (i.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> A = i.<span class="hljs-title function_">_</span>(<span class="hljs-string">&#x27;[loc-key]&#x27;</span>), Q = <span class="hljs-number">0</span>; Q &lt; A.<span class="hljs-property">length</span>; Q++) &#123;<br>        <span class="hljs-keyword">var</span> B = A[Q],<br>          E = <span class="hljs-title function_">F</span>(B.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&#x27;loc-key&#x27;</span>))<br>        B.<span class="hljs-property">innerText</span> = E<br>      &#125;<br>    &#125;),<br>    B<br>  )<br>&#125;<br></code></pre></td></tr></table></figure>增加 <code>(I.display = &#39;none&#39;),</code></li><li>接着查找下面这一句<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;app&#x27;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>),<br></code></pre></td></tr></table></figure>将 <code>none</code> 改为 <code>block</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;app&#x27;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;block&#x27;</span>),<br></code></pre></td></tr></table></figure></li><li>保存</li></ul><h2 id="2、系统修改，开启-Adobe-CEP-debug-模式"><a href="#2、系统修改，开启-Adobe-CEP-debug-模式" class="headerlink" title="2、系统修改，开启 Adobe CEP debug 模式"></a>2、系统修改，开启 Adobe CEP debug 模式</h2><p>因为插件在打包发布的时候有代码签名，默认不执行修改过的文件，需要手动开启 <code>debug</code> 模式。(下面是adobe CEP 开发文档原文)  </p><ul><li>Win: regedit &gt; HKEY_CURRENT_USER&#x2F;Software&#x2F;Adobe&#x2F;CSXS.8, then add a new entry PlayerDebugMode of type “string” with the value of “1”.</li><li>Mac: In the terminal, type: <code>defaults write com.adobe.CSXS.8 PlayerDebugMode 1</code> (The plist is also located at &#x2F;Users&#x2F;<code>&lt;username&gt;</code>&#x2F;Library&#x2F;Preferences&#x2F;com.adobe.CSXS.8.plist)</li></ul><p>These entries will enable debug extensions to be displayed in the host applications. Please note that, CSXS.8 is given with the assumption that, you are developing the extension for CEP 8. If you are developing extension for previous version of CEP, replace 8 with corresponding version number.</p><h4 id="Special-notes-for-Mac-10-9-and-higher"><a href="#Special-notes-for-Mac-10-9-and-higher" class="headerlink" title="Special notes for Mac 10.9 and higher"></a>Special notes for Mac 10.9 and higher</h4><p>Staring with Mac 10.9, Apple introduced a caching mechanism for plist files. Your modifications to plist files does not take effect until the cache gets updated (on a periodic basis, you cannot know exactly when the update will happen). To make sure your modifications take effect, there are two methods.</p><ul><li>Kill <strong>cfprefsd</strong> process. It will restart automatically. Then the update<br>takes effect.</li><li>Restart your Mac, or log out the current user and re-log in.</li><li><a href="http://hints.macworld.com/article.php?story=20130908042828630">More Information</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Adobe</category>
      
      <category>AfterEffect</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Adobe</tag>
      
      <tag>After Effect</tag>
      
      <tag>插件</tag>
      
      <tag>FLow</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>查看全局安装的 npm 包</title>
    <link href="/2018/03/23/16252bdbc48.html"/>
    <url>/2018/03/23/16252bdbc48.html</url>
    
    <content type="html"><![CDATA[<h2 id="npm-查看全局安装的-packages"><a href="#npm-查看全局安装的-packages" class="headerlink" title="npm 查看全局安装的 packages"></a>npm 查看全局安装的 packages</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> list -g<br></code></pre></td></tr></table></figure><h2 id="npm-查看全局安装的-packages-显示一级目录"><a href="#npm-查看全局安装的-packages-显示一级目录" class="headerlink" title="npm 查看全局安装的 packages ( 显示一级目录 )"></a>npm 查看全局安装的 packages ( 显示一级目录 )</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm list -g <span class="hljs-comment">--depth 0</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Node.js</category>
      
      <category>x86</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Node.js</tag>
      
      <tag>x86</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux 虚拟机中 Apache 访问宿主机 Vbox-shared-folder</title>
    <link href="/2017/09/30/15ed351a990.html"/>
    <url>/2017/09/30/15ed351a990.html</url>
    
    <content type="html"><![CDATA[<h2 id="将-sf-xxx-目录通过软连接的形式链接到-Apache-Document-Root。"><a href="#将-sf-xxx-目录通过软连接的形式链接到-Apache-Document-Root。" class="headerlink" title="将 sf_xxx 目录通过软连接的形式链接到 Apache Document Root。"></a>将 sf_xxx 目录通过软连接的形式链接到 Apache Document Root。</h2><p><code>ln -s /media/sf_xxx  /var/www/html</code><br>【注意】要使用绝对路径。</p><h2 id="将-www-data-用户加入到-vboxsf-用户组。"><a href="#将-www-data-用户加入到-vboxsf-用户组。" class="headerlink" title="将 www_data 用户加入到 vboxsf 用户组。"></a>将 www_data 用户加入到 vboxsf 用户组。</h2><p><code>sudo usermod -a -G vboxsf www-data</code><br>尝试重启 虚拟机 查看是否生效</p>]]></content>
    
    
    <categories>
      
      <category>Server</category>
      
      <category>VirtualBox</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>VirtualBox</tag>
      
      <tag>debian</tag>
      
      <tag>Apache</tag>
      
      <tag>共享文件夹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>debian 部署 Apache2+php7+MySQL+phpMyAdmin</title>
    <link href="/2017/09/30/15ed3518280.html"/>
    <url>/2017/09/30/15ed3518280.html</url>
    
    <content type="html"><![CDATA[<p>1.<code>sudo  apt-get update</code><br>2.<code>sudo apt-get upgrade</code><br>3.<code>sudo apt-get install apache2</code><br>4.<code>sudo apt-get install php7.0</code><br>5.<code>sudo apt-get install mysql-server mysql-client</code><br>6.<code>sudo apt-get install phpmyadmin</code></p><span id="more"></span><p>【注意】安装mysql的时候不会提示输入root密码，需要在安装完成之后在终端执行<br><code>sudo mysql_secure_installation</code><br>根据提示设置MySQL root帐号的密码，以及是否允许root 账号远程连接。<br>接着终端执行下面几条<br><code>sudo mysql -u root</code><br><code>use mysql</code><br><code>update mysql.user set plugin = &#39;&#39;where User=&#39;root&#39;; </code><br><code>flush privileges; </code><br><code>exit;</code><br>至此phpmyadmin可以使用root帐户登陆。</p>]]></content>
    
    
    <categories>
      
      <category>Server</category>
      
      <category>LAMP</category>
      
    </categories>
    
    
    <tags>
      
      <tag>debian</tag>
      
      <tag>Server</tag>
      
      <tag>LAMP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux 虚拟机 访问 Virtual Box 宿主机 共享文件夹</title>
    <link href="/2017/09/30/15ed350de70.html"/>
    <url>/2017/09/30/15ed350de70.html</url>
    
    <content type="html"><![CDATA[<p>Vbox共享文件夹挂载在<code>/media/sf_xxx</code>，属于<code>root</code>用户和<code>vfsbox</code>用户组，一般用户不能访问。<br>想要访问共享文件夹需要将用户加入 <code>vfsbox</code> 用户组。<br>首先安装  <code>VBoxLinuxAdditions</code><br>然后在终端中执行：<br> <code>sudo usermod -a -G vboxsf 你的用户名</code></p>]]></content>
    
    
    <categories>
      
      <category>Server</category>
      
      <category>VirtualBox</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>VirtualBox</tag>
      
      <tag>VBox shared folder</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>免费获取 Paragon 系列正版软件（NTFS for Mac &amp;&amp; HFS+ for Windows）</title>
    <link href="/2017/09/22/15ea83d3c38.html"/>
    <url>/2017/09/22/15ea83d3c38.html</url>
    
    <content type="html"><![CDATA[<p><a href="http://www.paragon-drivers.com/cn/ntfs-mac-free/ntfs-free.html">http://www.paragon-drivers.com/cn/ntfs-mac-free/ntfs-free.html</a><br><a href="http://www.paragon-drivers.com/cn/hfs-windows-free/hfs-free.html">http://www.paragon-drivers.com/cn/hfs-windows-free/hfs-free.html</a></p><p><strong>Paragon 网站上有免费的软件可以注册使用。</strong></p><h2 id="打开网站"><a href="#打开网站" class="headerlink" title="打开网站"></a>打开网站</h2><p>** 首先打开网站下载special edition版本的软件 **</p><p><img src="https://upload-images.jianshu.io/upload_images/4221131-375ad36ed9fb9167.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="NTFS+ for Mac Download"></p><p><img src="https://upload-images.jianshu.io/upload_images/4221131-26d4875f5e5ff912.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="HFS+ for Windows Download"><br>[注：免费的版本不是最新的版本，但是实测软件在OSX Yosemite 和 Windows 10 创意者版本使用没有问题] </p><h2 id="提交邮箱"><a href="#提交邮箱" class="headerlink" title="提交邮箱"></a>提交邮箱</h2><p>** 下载页面的下方填入自己的邮箱，提交之后会收到 PRODUCT KEY 和 SERIAL NUMBER **</p><p><img src="https://upload-images.jianshu.io/upload_images/4221131-f523d2874b5f4071.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="NTFS For Mac.png"></p><p><img src="https://upload-images.jianshu.io/upload_images/4221131-5053b2342ae84f4d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="HFS+ for Windows.png"></p><h2 id="接收key-和-序列号"><a href="#接收key-和-序列号" class="headerlink" title="接收key 和 序列号"></a>接收key 和 序列号</h2><h2 id="安装并激活"><a href="#安装并激活" class="headerlink" title="安装并激活"></a>安装并激活</h2><p>** 安装软件填入收到的key 和 序列号 激活软件，永久有效。**<br>windows 10 下写入速度截图（移动硬盘不给力，这个速度还可以）</p><p><img src="https://upload-images.jianshu.io/upload_images/4221131-a8a81f3f91eacb75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="Paragon HFS For Windows8.png"></p>]]></content>
    
    
    <categories>
      
      <category>软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Mac</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>高度不一的&amp;lt;li&amp;gt;列表靠底部对齐</title>
    <link href="/2017/09/11/15e704ae0c8.html"/>
    <url>/2017/09/11/15e704ae0c8.html</url>
    
    <content type="html"><![CDATA[<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">HTML</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>测试文字底部对齐<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css">* &#123;</span><br><span class="language-css"><span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css"><span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css"><span class="hljs-attribute">font</span>: <span class="hljs-number">12px</span>/<span class="hljs-number">1.5</span> arial;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css"><span class="hljs-attribute">list-style</span>: none;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css"><span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css">*<span class="hljs-attribute">display</span>: inline;</span><br><span class="language-css">*zoom: <span class="hljs-number">1</span>;</span><br><span class="language-css"><span class="hljs-attribute">width</span>: <span class="hljs-number">1em</span>;</span><br><span class="language-css"><span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"><span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css"><span class="hljs-attribute">background</span>: <span class="hljs-number">#cecece</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 65px;&quot;</span>&gt;</span>65<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 80px;&quot;</span>&gt;</span>80<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 40px;&quot;</span>&gt;</span>40<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 60px;&quot;</span>&gt;</span>60<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 50px;&quot;</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 70px;&quot;</span>&gt;</span>70<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/4221131-e474b0a909b03bdd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="预览1.png"><br><img src="http://upload-images.jianshu.io/upload_images/4221131-a836fa15f7324ecd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" srcset="/img/loading.gif" lazyload alt="预览2.png"></p><ul><li>当<code>&lt;li&gt;</code>标签内没有文本节点时，通过设置样式**<code>display:inline-block</code>**可以将高度不一样的<code>&lt;li&gt;</code>标签底部对齐。</li><li>当<code>&lt;li&gt;</code>标签内有文本节点时，通过设置样式**<code>display:inline-block</code><strong>，</strong><code>overflow:hidden</code>**可以将高度不一样的<code>&lt;li&gt;</code>标签底部对齐。</li></ul>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows 10 环境下安装 Python3 和 PyQt</title>
    <link href="/2017/09/08/15e5d951160.html"/>
    <url>/2017/09/08/15e5d951160.html</url>
    
    <content type="html"><![CDATA[<h3 id="安装简述"><a href="#安装简述" class="headerlink" title="安装简述:"></a>安装简述:</h3><ul><li>安装 <strong>python</strong></li><li>安装 <strong>pip</strong></li><li>通过 <strong>pip</strong> 安装 <strong>sip</strong></li><li>通过 <strong>pip</strong> 安装 <strong>PyQt</strong></li></ul><h3 id="具体步骤"><a href="#具体步骤" class="headerlink" title="具体步骤:"></a>具体步骤:</h3><ol><li>从 <a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a> 下载对应的python版本  </li><li><ul><li>安装 <strong>python3</strong></li><li>检查 <strong>python</strong> 环境<br> <strong><code>win+x</code><strong>打开</strong>Windows PowerShell</strong>(或者CMD)窗口，键入**<code>python -V</code><strong>回车，查看 <strong>python</strong> 版本号，确定</strong>python** 已经正确安装完成</li></ul></li><li><ul><li>安装 <strong>pip</strong><ol><li>获取 <strong>pip</strong> 官方文档中的安装脚本<a href="https://bootstrap.pypa.io/get-pip.py">https://bootstrap.pypa.io/get-pip.py</a></li><li>在脚本所在文件夹打开 <strong>Windows PowerShell</strong> 键入：</li></ol></li></ul></li></ol><p><code>python get-pip.py</code><br>(更多参考<a href="https://pip.pypa.io/en/stable/installing/">https://pip.pypa.io/en/stable/installing/</a>)<br>4. 安装PyQt<br>    1. 在 <strong>Windows PowerShell</strong> 键入<code>pip3 install SIP</code>安装SIP<br>    1. 在 <strong>Windows PowerShell</strong> 键入<code>pip3 install PyQt5</code>  安装PyQt<br>[注意]：在安装PyQt模块之前请确保已经正确安装SIP模块。</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Python</tag>
      
      <tag>PyQt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>树莓派安装指定版本的node.js</title>
    <link href="/2017/06/17/15cb542dcc8.html"/>
    <url>/2017/06/17/15cb542dcc8.html</url>
    
    <content type="html"><![CDATA[<p>默认你已经打开终端 <code>ssh</code> 连接至树莓派<br>依次执行下面的命令更新源和package：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo apt-<span class="hljs-built_in">get</span> update<br>$ sudo apt-<span class="hljs-built_in">get</span> upgrade<br></code></pre></td></tr></table></figure><h2 id="安装-node-和-npm"><a href="#安装-node-和-npm" class="headerlink" title="安装 node 和 npm"></a>安装 node 和 npm</h2><p>如果你之前通过 <code>apt-get</code> 安装过 <em>node</em> 和 <em>npm</em> 请忽略，直接到下一步。如果没有就依次执行下面的命令</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo apt-<span class="hljs-built_in">get</span> install nodejs<br>$ sudo apt-<span class="hljs-built_in">get</span> install npm<br></code></pre></td></tr></table></figure><p>可以通过下面的命令查看<code>apt-get</code>源中的软件和描述。</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>apt-cache serach nodejs<br><span class="hljs-variable">$ </span>apt-cache serach npm<br></code></pre></td></tr></table></figure><p>安装完成后通过 <code>node -v</code>  <code>npm -v</code>  查看 node 和 npm 的版本。<br>不出意外的话 <code>node</code> 的版本是0.10.x ，<code>npm</code> 的版本是2.x的老版本。</p><h2 id="升级-node-和-npm"><a href="#升级-node-和-npm" class="headerlink" title="升级 node 和 npm"></a>升级 node 和 npm</h2><p>全局安装管理 <code>node</code> 版本的软件包 <code>n</code>，软件包的名字就叫做 <code>n</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ sudo npm <span class="hljs-keyword">install</span> -g n<br></code></pre></td></tr></table></figure><p>安装 <code>node</code> 稳定版本</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo n stable</span><br></code></pre></td></tr></table></figure><p>安装 <code>node</code> 指定版本</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">sudo</span> n vxxx<br><span class="hljs-comment">#vvv为版本号</span><br></code></pre></td></tr></table></figure><p>安装 <code>node LTS 6.11.0</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> n v6.<span class="hljs-number">11</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p><em>以上所有命令都要 sudo 以root 权限执行</em></p><h2 id="刷新环境变量"><a href="#刷新环境变量" class="headerlink" title="刷新环境变量"></a>刷新环境变量</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br></code></pre></td></tr></table></figure><h2 id="清理多余的-node-版本"><a href="#清理多余的-node-版本" class="headerlink" title="清理多余的 node 版本"></a>清理多余的 node 版本</h2><p>现在系统中的 node 已经是指定的版本了。<br>但是除了最新的node之外，你还有一个通过apt-get所安装的低版本，可以不用管它，也可以通过下面的命令来清理。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ sudo apt-<span class="hljs-built_in">get</span> <span class="hljs-built_in">remove</span> nodejs<br>$ sudo apt autoremove<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Node.js</category>
      
      <category>树莓派</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Node.js</tag>
      
      <tag>树莓派</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2018 百度前端技术学院课程 Demo</title>
    <link href="/2017/05/08/15be78a9230.html"/>
    <url>/2017/05/08/15be78a9230.html</url>
    
    <content type="html"><![CDATA[<h3 id="2018-百度前端技术学院课程-Demo"><a href="#2018-百度前端技术学院课程-Demo" class="headerlink" title="2018 百度前端技术学院课程 Demo"></a>2018 百度前端技术学院课程 Demo</h3><span id="more"></span><h4 id="设计师学院"><a href="#设计师学院" class="headerlink" title="设计师学院"></a>设计师学院</h4><ul><li><a href="/skip_render/ife-2018/example-1/index.html" target="blank">[No.1 - 制作一个简单的菜单动画效果]</a></li><li><a href="/skip_render/ife-2018/example-2/index.html" target="blank">[No.2 - 初步接触 CSS 2D 变形]</a></li><li><a href="/skip_render/ife-2018/example-3/index.html" target="blank">[No.3 - CSS transition 和 CSS transform 配合制作动画]</a></li><li><a href="/skip_render/ife-2018/example-4/index.html" target="blank">[No.4 - 3D 空间的卡片翻转动效]</a></li><li><a href="/skip_render/ife-2018/example-5/index.html" target="blank">[No.5 - 纯 CSS 制作绕中轴旋转的立方体]</a></li><li><a href="/skip_render/ife-2018/example-6/index.html" target="blank">[No.6 - 利用 CSS animation 制作一个炫酷的 Slider]</a></li><li><a href="/skip_render/ife-2018/example-7/index.html" target="blank">[No.7 - 使用 animate.css 实现一个优雅的登录框]</a></li><li><a href="/skip_render/ife-2018/example-8/index.html" target="blank">[No.8 - 把 AE 动画转换成 Web 原生动画]</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
      <category>Demo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux common commands</title>
    <link href="/2017/05/08/15be6bd3bc8.html"/>
    <url>/2017/05/08/15be6bd3bc8.html</url>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 保持文件属性</span><br><span class="hljs-built_in">cp</span> -p <br><br><span class="hljs-comment"># 递归处理目录及文件</span><br>chowm -R <br><br><span class="hljs-comment"># 统计目录大小/排序/前20</span><br><span class="hljs-built_in">du</span> -shc ~/.cache/* | <span class="hljs-built_in">sort</span> -hr | <span class="hljs-built_in">head</span> -20<br><br><span class="hljs-comment"># 获取当前目录名称</span><br><span class="hljs-built_in">echo</span> $(<span class="hljs-built_in">cd</span> $(<span class="hljs-built_in">dirname</span> <span class="hljs-variable">$0</span>); <span class="hljs-built_in">pwd</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>commands</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>commands</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
